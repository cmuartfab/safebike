   1               		.file	"pcf_tdma.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
  10               		.text
  11               	.Ltext0:
 342               	.global	rf_rx_callback
 344               	rf_rx_callback:
 345               		.stabd	46,0,0
   1:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** /******************************************************************************
   2:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  Nano-RK, a real-time operating system for sensor networks.
   3:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  Copyright (C) 2007, Real-Time and Multimedia Lab, Carnegie Mellon University
   4:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  All rights reserved.
   5:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *
   6:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  This is the Open Source Version of Nano-RK included as part of a Dual
   7:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  Licensing Model. If you are unsure which license to use please refer to:
   8:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  http://www.nanork.org/nano-RK/wiki/Licensing
   9:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *
  10:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  This program is free software: you can redistribute it and/or modify
  11:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  it under the terms of the GNU General Public License as published by
  12:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  the Free Software Foundation, version 2.0 of the License.
  13:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *
  14:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  This program is distributed in the hope that it will be useful,
  15:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  but WITHOUT ANY WARRANTY; without even the implied warranty of
  16:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  17:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  GNU General Public License for more details.
  18:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *
  19:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  You should have received a copy of the GNU General Public License
  20:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
  21:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *
  22:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  Contributing Authors (specific to this file):
  23:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *  Anthony Rowe
  24:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** *******************************************************************************/
  25:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <include.h>
  26:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <ulib.h>
  27:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <stdlib.h>
  28:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <avr/sleep.h>
  29:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <avr/wdt.h>
  30:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <avr/eeprom.h>
  31:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <stdio.h>
  32:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <avr/interrupt.h>
  33:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <nrk.h>
  34:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <nrk_events.h>
  35:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <nrk_timer.h>
  36:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <nrk_error.h>
  37:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <nrk_reserve.h>
  38:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <pcf_tdma.h>
  39:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #include <nrk_cfg.h>
  40:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
  41:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** //#define GPIO_DEBUG
  42:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #define TX_PKT_RETRY	1
  43:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
  44:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
  45:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #ifndef PCF_TDMA_TIMEOUT 
  46:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #define PCF_TDMA_TIMEOUT 7 
  47:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #endif
  48:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
  49:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #ifndef TDMA_STACKSIZE
  50:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #define TDMA_STACKSIZE 256 
  51:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #endif
  52:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t tdma_wakeup_flag=0;
  53:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static nrk_task_type tdma_task;
  54:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static NRK_STK tdma_task_stack[TDMA_STACKSIZE];
  55:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t tdma_tx_buf[TDMA_MAX_PKT_SIZE];
  56:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t tdma_rx_buf[TDMA_MAX_PKT_SIZE];
  57:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
  58:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint16_t tdma_tx_sched[TDMA_MAX_TX_SLOTS];
  59:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t tdma_tx_slots;
  60:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t _tdma_aes_enabled=0;
  61:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t tdma_my_mac;
  62:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t tdma_mode;
  63:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t tdma_ttl;
  64:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t tx_data_ready;
  65:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
  66:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** //#define DEBUG
  67:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint16_t tdma_slot_len_ms;
  68:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint16_t tdma_slots_per_cycle;
  69:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint16_t tdma_last_tx_slot;
  70:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
  71:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t tdma_tx_data_ready;
  72:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t tdma_rx_buf_empty;
  73:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static volatile uint8_t tdma_running;
  74:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t tdma_chan;
  75:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t tdma_is_enabled;
  76:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint16_t tdma_failure_cnt;
  77:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
  78:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t ttl_delay;
  79:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static nrk_time_t _ttl_delay_total;
  80:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static nrk_time_t _ttl_delay_per_tx;
  81:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
  82:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static nrk_time_t _tdma_slot_time;
  83:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static nrk_time_t _tdma_next_wakeup;
  84:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static nrk_time_t tmp_time;
  85:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
  86:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static int8_t tx_reserve;
  87:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint16_t tdma_rx_failure_cnt;
  88:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
  89:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static uint8_t sync_status;
  90:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** static int8_t (*tdma_error_callback)(uint16_t cons_err_cnt);
  91:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
  92:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
  93:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** /**
  94:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****  *  This is a callback if you require immediate response to a packet
  95:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****  */
  96:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** RF_RX_INFO *rf_rx_callback (RF_RX_INFO * pRRI)
  97:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 347               	.LM0:
 348               	.LFBB1:
 349               	/* prologue: function */
 350               	/* frame size = 0 */
 351               	/* stack size = 0 */
 352               	.L__stack_usage = 0
  98:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   // Any code here gets called the instant a packet is received from the interrupt   
  99:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return pRRI;
 100:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 354               	.LM1:
 355 0000 0895      		ret
 357               	.Lscope1:
 359               		.stabd	78,0,0
 362               	.global	tdma_aes_setkey
 364               	tdma_aes_setkey:
 365               		.stabd	46,0,0
 101:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 102:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** void tdma_aes_setkey(uint8_t *key)
 103:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 367               	.LM2:
 368               	.LFBB2:
 369               	/* prologue: function */
 370               	/* frame size = 0 */
 371               	/* stack size = 0 */
 372               	.L__stack_usage = 0
 104:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** uint8_t i;
 105:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	aes_setkey(key);
 374               	.LM3:
 375 0002 0C94 0000 		jmp aes_setkey
 377               	.Lscope2:
 379               		.stabd	78,0,0
 381               	.global	tdma_aes_enable
 383               	tdma_aes_enable:
 384               		.stabd	46,0,0
 106:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 107:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 108:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 109:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** void tdma_aes_enable()
 110:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 386               	.LM4:
 387               	.LFBB3:
 388               	/* prologue: function */
 389               	/* frame size = 0 */
 390               	/* stack size = 0 */
 391               	.L__stack_usage = 0
 111:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   _tdma_aes_enabled=1;
 393               	.LM5:
 394 0006 81E0      		ldi r24,lo8(1)
 395 0008 8093 0000 		sts _tdma_aes_enabled,r24
 396 000c 0895      		ret
 398               	.Lscope3:
 400               		.stabd	78,0,0
 402               	.global	tdma_aes_disable
 404               	tdma_aes_disable:
 405               		.stabd	46,0,0
 112:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 113:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 114:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** void tdma_aes_disable()
 115:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 407               	.LM6:
 408               	.LFBB4:
 409               	/* prologue: function */
 410               	/* frame size = 0 */
 411               	/* stack size = 0 */
 412               	.L__stack_usage = 0
 116:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   _tdma_aes_enabled=1;
 414               	.LM7:
 415 000e 81E0      		ldi r24,lo8(1)
 416 0010 8093 0000 		sts _tdma_aes_enabled,r24
 417 0014 0895      		ret
 419               	.Lscope4:
 421               		.stabd	78,0,0
 423               	.global	tdma_sync_ok
 425               	tdma_sync_ok:
 426               		.stabd	46,0,0
 117:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 118:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 119:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** uint8_t tdma_sync_ok()
 120:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 428               	.LM8:
 429               	.LFBB5:
 430               	/* prologue: function */
 431               	/* frame size = 0 */
 432               	/* stack size = 0 */
 433               	.L__stack_usage = 0
 121:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** return sync_status;
 122:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 435               	.LM9:
 436 0016 8091 0000 		lds r24,sync_status
 437 001a 0895      		ret
 439               	.Lscope5:
 441               		.stabd	78,0,0
 444               	.global	tdma_set_error_callback
 446               	tdma_set_error_callback:
 447               		.stabd	46,0,0
 123:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 124:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t tdma_set_error_callback(void (*fp)(void))
 125:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 449               	.LM10:
 450               	.LFBB6:
 451               	/* prologue: function */
 452               	/* frame size = 0 */
 453               	/* stack size = 0 */
 454               	.L__stack_usage = 0
 126:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	if(fp==NULL ) return NRK_ERROR;
 456               	.LM11:
 457 001c 0097      		sbiw r24,0
 458 001e 01F0      		breq .L8
 127:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	tdma_error_callback=fp;
 460               	.LM12:
 461 0020 9093 0000 		sts tdma_error_callback+1,r25
 462 0024 8093 0000 		sts tdma_error_callback,r24
 128:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** return NRK_OK;
 464               	.LM13:
 465 0028 81E0      		ldi r24,lo8(1)
 466 002a 0895      		ret
 467               	.L8:
 126:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	if(fp==NULL ) return NRK_ERROR;
 469               	.LM14:
 470 002c 8FEF      		ldi r24,lo8(-1)
 129:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 472               	.LM15:
 473 002e 0895      		ret
 475               	.Lscope6:
 477               		.stabd	78,0,0
 480               	.global	tdma_tx_slot_add
 482               	tdma_tx_slot_add:
 483               		.stabd	46,0,0
 130:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 131:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 132:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t tdma_tx_slot_add (uint16_t slot)
 133:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 485               	.LM16:
 486               	.LFBB7:
 487               	/* prologue: function */
 488               	/* frame size = 0 */
 489               	/* stack size = 0 */
 490               	.L__stack_usage = 0
 134:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_tx_sched[0] = slot;
 492               	.LM17:
 493 0030 9093 0000 		sts tdma_tx_sched+1,r25
 494 0034 8093 0000 		sts tdma_tx_sched,r24
 135:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_tx_slots = 1;
 496               	.LM18:
 497 0038 81E0      		ldi r24,lo8(1)
 498 003a 8093 0000 		sts tdma_tx_slots,r24
 136:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return NRK_OK;
 137:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 500               	.LM19:
 501 003e 0895      		ret
 503               	.Lscope7:
 505               		.stabd	78,0,0
 509               	.global	tdma_tx_reserve_set
 511               	tdma_tx_reserve_set:
 512               		.stabd	46,0,0
 138:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 139:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t tdma_tx_reserve_set (nrk_time_t * period, uint16_t pkts)
 140:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 514               	.LM20:
 515               	.LFBB8:
 516               	/* prologue: function */
 517               	/* frame size = 0 */
 518               	/* stack size = 0 */
 519               	.L__stack_usage = 0
 141:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 142:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #ifdef NRK_MAX_RESERVES
 143:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** // Create a reserve if it doesn't exist
 144:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (tx_reserve == -1)
 145:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     tx_reserve = nrk_reserve_create ();
 146:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (tx_reserve >= 0)
 147:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return nrk_reserve_set (tx_reserve, period, pkts, NULL);
 148:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   else
 149:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 150:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #else
 151:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return NRK_ERROR;
 152:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #endif
 153:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 521               	.LM21:
 522 0040 8FEF      		ldi r24,lo8(-1)
 523 0042 0895      		ret
 525               	.Lscope8:
 527               		.stabd	78,0,0
 529               	.global	tdma_tx_reserve_get
 531               	tdma_tx_reserve_get:
 532               		.stabd	46,0,0
 154:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 155:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** uint16_t tdma_tx_reserve_get ()
 156:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 534               	.LM22:
 535               	.LFBB9:
 536               	/* prologue: function */
 537               	/* frame size = 0 */
 538               	/* stack size = 0 */
 539               	.L__stack_usage = 0
 157:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #ifdef NRK_MAX_RESERVES
 158:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (tx_reserve >= 0)
 159:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return nrk_reserve_get (tx_reserve);
 160:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   else
 161:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return 0;
 162:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #else
 163:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return 0;
 164:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #endif
 165:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 541               	.LM23:
 542 0044 80E0      		ldi r24,0
 543 0046 90E0      		ldi r25,0
 544 0048 0895      		ret
 546               	.Lscope9:
 548               		.stabd	78,0,0
 551               	.global	tdma_set_rf_power
 553               	tdma_set_rf_power:
 554               		.stabd	46,0,0
 166:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 167:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t tdma_set_rf_power (uint8_t power)
 168:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 556               	.LM24:
 557               	.LFBB10:
 558               	/* prologue: function */
 559               	/* frame size = 0 */
 560               	/* stack size = 0 */
 561               	.L__stack_usage = 0
 169:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (power > 31)
 563               	.LM25:
 564 004a 8032      		cpi r24,lo8(32)
 565 004c 00F4      		brsh .L15
 170:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 171:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   rf_tx_power (power);
 567               	.LM26:
 568 004e 0E94 0000 		call rf_tx_power
 172:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return NRK_OK;
 570               	.LM27:
 571 0052 81E0      		ldi r24,lo8(1)
 572 0054 0895      		ret
 573               	.L15:
 170:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 575               	.LM28:
 576 0056 8FEF      		ldi r24,lo8(-1)
 173:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 578               	.LM29:
 579 0058 0895      		ret
 581               	.Lscope10:
 583               		.stabd	78,0,0
 586               	.global	tdma_set_channel
 588               	tdma_set_channel:
 589               		.stabd	46,0,0
 174:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 175:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t tdma_set_channel (uint8_t chan)
 176:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 591               	.LM30:
 592               	.LFBB11:
 593               	/* prologue: function */
 594               	/* frame size = 0 */
 595               	/* stack size = 0 */
 596               	.L__stack_usage = 0
 177:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (chan > 26)
 598               	.LM31:
 599 005a 8B31      		cpi r24,lo8(27)
 600 005c 00F4      		brsh .L18
 601 005e 682F      		mov r22,r24
 178:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 179:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_chan = chan;
 603               	.LM32:
 604 0060 8093 0000 		sts tdma_chan,r24
 180:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** //rf_init (&tdma_rfRxInfo, chan, 0xFFFF, 0x00000);
 181:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   rf_init (&tdma_rfRxInfo, chan, 0x2420, 0x1214);
 606               	.LM33:
 607 0064 24E1      		ldi r18,lo8(20)
 608 0066 32E1      		ldi r19,lo8(18)
 609 0068 40E2      		ldi r20,lo8(32)
 610 006a 54E2      		ldi r21,lo8(36)
 611 006c 80E0      		ldi r24,lo8(tdma_rfRxInfo)
 612 006e 90E0      		ldi r25,hi8(tdma_rfRxInfo)
 613 0070 0E94 0000 		call rf_init
 182:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return NRK_OK;
 615               	.LM34:
 616 0074 81E0      		ldi r24,lo8(1)
 617 0076 0895      		ret
 618               	.L18:
 178:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 620               	.LM35:
 621 0078 8FEF      		ldi r24,lo8(-1)
 183:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 623               	.LM36:
 624 007a 0895      		ret
 626               	.Lscope11:
 628               		.stabd	78,0,0
 631               	.global	tdma_set_slot_len_ms
 633               	tdma_set_slot_len_ms:
 634               		.stabd	46,0,0
 184:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 185:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t tdma_set_slot_len_ms (uint16_t len)
 186:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 636               	.LM37:
 637               	.LFBB12:
 638               	/* prologue: function */
 639               	/* frame size = 0 */
 640               	/* stack size = 0 */
 641               	.L__stack_usage = 0
 187:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_slot_len_ms = len;
 643               	.LM38:
 644 007c 9093 0000 		sts tdma_slot_len_ms+1,r25
 645 0080 8093 0000 		sts tdma_slot_len_ms,r24
 188:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   _tdma_slot_time.nano_secs = len * NANOS_PER_MS;
 647               	.LM39:
 648 0084 E0E0      		ldi r30,lo8(_tdma_slot_time)
 649 0086 F0E0      		ldi r31,hi8(_tdma_slot_time)
 650 0088 DC01      		movw r26,r24
 651 008a 20E4      		ldi r18,lo8(64)
 652 008c 32E4      		ldi r19,lo8(66)
 653 008e 4FE0      		ldi r20,lo8(15)
 654 0090 50E0      		ldi r21,0
 655 0092 0E94 0000 		call __muluhisi3
 656 0096 6483      		std Z+4,r22
 657 0098 7583      		std Z+5,r23
 658 009a 8683      		std Z+6,r24
 659 009c 9783      		std Z+7,r25
 189:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   _tdma_slot_time.secs = 0;
 661               	.LM40:
 662 009e 1082      		st Z,__zero_reg__
 663 00a0 1182      		std Z+1,__zero_reg__
 664 00a2 1282      		std Z+2,__zero_reg__
 665 00a4 1382      		std Z+3,__zero_reg__
 190:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return NRK_OK;
 191:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 667               	.LM41:
 668 00a6 81E0      		ldi r24,lo8(1)
 669 00a8 0895      		ret
 671               	.Lscope12:
 673               		.stabd	78,0,0
 676               	.global	tdma_set_slots_per_cycle
 678               	tdma_set_slots_per_cycle:
 679               		.stabd	46,0,0
 192:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 193:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 194:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t tdma_set_slots_per_cycle (uint16_t slots_per_cycle)
 195:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 681               	.LM42:
 682               	.LFBB13:
 683               	/* prologue: function */
 684               	/* frame size = 0 */
 685               	/* stack size = 0 */
 686               	.L__stack_usage = 0
 196:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 197:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_slots_per_cycle = slots_per_cycle;
 688               	.LM43:
 689 00aa 9093 0000 		sts tdma_slots_per_cycle+1,r25
 690 00ae 8093 0000 		sts tdma_slots_per_cycle,r24
 198:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 692               	.LM44:
 693 00b2 0895      		ret
 695               	.Lscope13:
 697               		.stabd	78,0,0
 703               	.global	tdma_send
 705               	tdma_send:
 706               		.stabd	46,0,0
 199:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 200:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t tdma_send (tdma_info * fd, uint8_t * buf, uint8_t len, uint8_t flags)
 201:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 708               	.LM45:
 709               	.LFBB14:
 710 00b4 CF92      		push r12
 711 00b6 DF92      		push r13
 712 00b8 EF92      		push r14
 713 00ba FF92      		push r15
 714 00bc CF93      		push r28
 715 00be DF93      		push r29
 716 00c0 00D0      		rcall .
 717 00c2 CDB7      		in r28,__SP_L__
 718 00c4 DEB7      		in r29,__SP_H__
 719               	/* prologue: function */
 720               	/* frame size = 2 */
 721               	/* stack size = 8 */
 722               	.L__stack_usage = 8
 723 00c6 6C01      		movw r12,r24
 724 00c8 7B01      		movw r14,r22
 202:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   uint32_t mask;
 203:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   uint8_t i;
 204:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 205:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (tx_data_ready == 1)
 726               	.LM46:
 727 00ca 8091 0000 		lds r24,tx_data_ready
 728 00ce 8130      		cpi r24,lo8(1)
 729 00d0 01F4      		brne .+2
 730 00d2 00C0      		rjmp .L32
 206:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 207:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (len == 0)
 732               	.LM47:
 733 00d4 4423      		tst r20
 734 00d6 01F4      		brne .+2
 735 00d8 00C0      		rjmp .L32
 208:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 209:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (buf == NULL)
 737               	.LM48:
 738 00da 6115      		cp r22,__zero_reg__
 739 00dc 7105      		cpc r23,__zero_reg__
 740 00de 01F4      		brne .+2
 741 00e0 00C0      		rjmp .L32
 210:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 211:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (fd == NULL)
 743               	.LM49:
 744 00e2 C114      		cp r12,__zero_reg__
 745 00e4 D104      		cpc r13,__zero_reg__
 746 00e6 01F4      		brne .+2
 747 00e8 00C0      		rjmp .L32
 212:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 213:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 214:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** // If reserve exists check it
 215:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #ifdef NRK_MAX_RESERVES
 216:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (tx_reserve != -1) {
 217:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     if (nrk_reserve_consume (tx_reserve) == NRK_ERROR) {
 218:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       return NRK_ERROR;
 219:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     }
 220:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   }
 221:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #endif
 222:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (flags == TDMA_BLOCKING)
 749               	.LM50:
 750 00ea 2111      		cpse r18,__zero_reg__
 751 00ec 00C0      		rjmp .L23
 223:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_signal_register (tdma_tx_pkt_done_signal);
 753               	.LM51:
 754 00ee 8091 0000 		lds r24,tdma_tx_pkt_done_signal
 755 00f2 2A83      		std Y+2,r18
 756 00f4 4983      		std Y+1,r20
 757 00f6 0E94 0000 		call nrk_signal_register
 758 00fa 4981      		ldd r20,Y+1
 759 00fc 2A81      		ldd r18,Y+2
 760               	.L23:
 224:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 225:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tx_data_ready = 1;
 762               	.LM52:
 763 00fe 81E0      		ldi r24,lo8(1)
 764 0100 8093 0000 		sts tx_data_ready,r24
 226:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 227:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfTxInfo.pPayload = tdma_tx_buf;
 766               	.LM53:
 767 0104 80E0      		ldi r24,lo8(tdma_tx_buf)
 768 0106 90E0      		ldi r25,hi8(tdma_tx_buf)
 769 0108 9093 0000 		sts tdma_rfTxInfo+3+1,r25
 770 010c 8093 0000 		sts tdma_rfTxInfo+3,r24
 228:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** // Setup the header data
 229:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfTxInfo.pPayload[TDMA_SLOT_HIGH] = (fd->slot >> 8) & 0xff;
 772               	.LM54:
 773 0110 F601      		movw r30,r12
 774 0112 8181      		ldd r24,Z+1
 775 0114 8093 0000 		sts tdma_tx_buf+1,r24
 230:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfTxInfo.pPayload[TDMA_SLOT_LOW] = (fd->slot & 0xff);
 777               	.LM55:
 778 0118 8081      		ld r24,Z
 779 011a 8093 0000 		sts tdma_tx_buf,r24
 231:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfTxInfo.pPayload[TDMA_DST_HIGH] = (fd->dst >> 8) & 0xff;
 781               	.LM56:
 782 011e 8581      		ldd r24,Z+5
 783 0120 9681      		ldd r25,Z+6
 784 0122 9093 0000 		sts tdma_tx_buf+3,r25
 232:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfTxInfo.pPayload[TDMA_DST_LOW] = (fd->dst & 0xff);
 786               	.LM57:
 787 0126 8093 0000 		sts tdma_tx_buf+2,r24
 233:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** //  tdma_rfTxInfo.pPayload[TDMA_SRC_HIGH] = (fd->src >> 8) & 0xff;
 234:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfTxInfo.pPayload[TDMA_SRC_HIGH] = (tdma_my_mac & 0xff);
 789               	.LM58:
 790 012a 8091 0000 		lds r24,tdma_my_mac
 791 012e 8093 0000 		sts tdma_tx_buf+5,r24
 235:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfTxInfo.pPayload[TDMA_SRC_LOW] = (tdma_my_mac >> 8) & 0xff;
 793               	.LM59:
 794 0132 1092 0000 		sts tdma_tx_buf+4,__zero_reg__
 236:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   fd->seq_num++;
 796               	.LM60:
 797 0136 8185      		ldd r24,Z+9
 798 0138 9285      		ldd r25,Z+10
 799 013a 0196      		adiw r24,1
 800 013c 9287      		std Z+10,r25
 801 013e 8187      		std Z+9,r24
 237:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfTxInfo.pPayload[TDMA_SEQ_NUM_HIGH] = ((fd->seq_num>>8) & 0xff);
 803               	.LM61:
 804 0140 9093 0000 		sts tdma_tx_buf+7,r25
 238:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfTxInfo.pPayload[TDMA_SEQ_NUM_LOW] = (fd->seq_num & 0xff);
 806               	.LM62:
 807 0144 8093 0000 		sts tdma_tx_buf+6,r24
 239:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfTxInfo.pPayload[TDMA_CYCLE_SIZE_HIGH] = (fd->cycle_size >> 8) & 0xff;
 809               	.LM63:
 810 0148 8381      		ldd r24,Z+3
 811 014a 8093 0000 		sts tdma_tx_buf+9,r24
 240:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfTxInfo.pPayload[TDMA_CYCLE_SIZE_LOW] = (fd->cycle_size & 0xff);
 813               	.LM64:
 814 014e 8281      		ldd r24,Z+2
 815 0150 8093 0000 		sts tdma_tx_buf+8,r24
 241:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfTxInfo.pPayload[TDMA_TTL] = tdma_ttl<<4 | tdma_ttl;
 817               	.LM65:
 818 0154 3091 0000 		lds r19,tdma_ttl
 819 0158 F0E1      		ldi r31,lo8(16)
 820 015a 3F9F      		mul r19,r31
 821 015c C001      		movw r24,r0
 822 015e 1124      		clr __zero_reg__
 823 0160 832B      		or r24,r19
 824 0162 8093 0000 		sts tdma_tx_buf+10,r24
 825 0166 5E2D      		mov r21,r14
 242:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 243:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** // Copy the user payload to the back of the header
 244:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   for (i = 0; i < len; i++)
 827               	.LM66:
 828 0168 F701      		movw r30,r14
 829 016a 8CE0      		ldi r24,lo8(12)
 830 016c 90E0      		ldi r25,0
 831               	.L24:
 832 016e 3E2F      		mov r19,r30
 833 0170 351B      		sub r19,r21
 835               	.LM67:
 836 0172 3417      		cp r19,r20
 837 0174 00F4      		brsh .L34
 245:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     tdma_rfTxInfo.pPayload[i + TDMA_PCF_HEADER] = buf[i];
 839               	.LM68:
 840 0176 3191      		ld r19,Z+
 841 0178 A091 0000 		lds r26,tdma_rfTxInfo+3
 842 017c B091 0000 		lds r27,tdma_rfTxInfo+3+1
 843 0180 A80F      		add r26,r24
 844 0182 B91F      		adc r27,r25
 845 0184 3C93      		st X,r19
 846 0186 0196      		adiw r24,1
 847 0188 00C0      		rjmp .L24
 848               	.L34:
 246:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** // Set packet length with header
 247:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfTxInfo.length = len + TDMA_PCF_HEADER;
 850               	.LM69:
 851 018a 445F      		subi r20,lo8(-(12))
 852 018c 4093 0000 		sts tdma_rfTxInfo+2,r20
 248:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #ifdef DEBUG
 249:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   nrk_kprintf (PSTR ("Waiting for tx done signal\r\n"));
 250:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** #endif
 251:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 252:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (flags == TDMA_BLOCKING) {
 854               	.LM70:
 855 0190 2111      		cpse r18,__zero_reg__
 856 0192 00C0      		rjmp .L33
 253:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     mask = nrk_event_wait (SIG (tdma_tx_pkt_done_signal));
 858               	.LM71:
 859 0194 81E0      		ldi r24,lo8(1)
 860 0196 90E0      		ldi r25,0
 861 0198 A0E0      		ldi r26,0
 862 019a B0E0      		ldi r27,0
 863 019c BC01      		movw r22,r24
 864 019e CD01      		movw r24,r26
 865 01a0 0090 0000 		lds r0,tdma_tx_pkt_done_signal
 866 01a4 00C0      		rjmp 2f
 867               		1:
 868 01a6 660F      		lsl r22
 869 01a8 771F      		rol r23
 870 01aa 881F      		rol r24
 871 01ac 991F      		rol r25
 872               		2:
 873 01ae 0A94      		dec r0
 874 01b0 02F4      		brpl 1b
 875 01b2 0E94 0000 		call nrk_event_wait
 876 01b6 6B01      		movw r12,r22
 877 01b8 7C01      		movw r14,r24
 254:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     if (mask == 0)
 879               	.LM72:
 880 01ba 6115      		cp r22,__zero_reg__
 881 01bc 7105      		cpc r23,__zero_reg__
 882 01be 8105      		cpc r24,__zero_reg__
 883 01c0 9105      		cpc r25,__zero_reg__
 884 01c2 01F4      		brne .L27
 255:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_kprintf (PSTR ("TDMA TX: Error calling event wait\r\n"));
 886               	.LM73:
 887 01c4 80E0      		ldi r24,lo8(__c.3712)
 888 01c6 90E0      		ldi r25,hi8(__c.3712)
 889 01c8 0E94 0000 		call nrk_kprintf
 890               	.L27:
 256:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     if ((mask & SIG (tdma_tx_pkt_done_signal)) == 0)
 892               	.LM74:
 893 01cc 0090 0000 		lds r0,tdma_tx_pkt_done_signal
 894 01d0 00C0      		rjmp 2f
 895               		1:
 896 01d2 F694      		lsr r15
 897 01d4 E794      		ror r14
 898 01d6 D794      		ror r13
 899 01d8 C794      		ror r12
 900               		2:
 901 01da 0A94      		dec r0
 902 01dc 02F4      		brpl 1b
 903 01de C0FC      		sbrc r12,0
 904 01e0 00C0      		rjmp .L33
 257:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_kprintf (PSTR ("TDMA TX: Woke up on wrong signal\r\n"));
 906               	.LM75:
 907 01e2 80E0      		ldi r24,lo8(__c.3714)
 908 01e4 90E0      		ldi r25,hi8(__c.3714)
 909 01e6 0E94 0000 		call nrk_kprintf
 910               	.L33:
 258:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_OK;
 912               	.LM76:
 913 01ea 81E0      		ldi r24,lo8(1)
 914 01ec 00C0      		rjmp .L22
 915               	.L32:
 206:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (len == 0)
 917               	.LM77:
 918 01ee 8FEF      		ldi r24,lo8(-1)
 919               	.L22:
 920               	/* epilogue start */
 259:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   }
 260:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 261:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return NRK_OK;
 262:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 922               	.LM78:
 923 01f0 0F90      		pop __tmp_reg__
 924 01f2 0F90      		pop __tmp_reg__
 925 01f4 DF91      		pop r29
 926 01f6 CF91      		pop r28
 927 01f8 FF90      		pop r15
 928 01fa EF90      		pop r14
 929 01fc DF90      		pop r13
 930 01fe CF90      		pop r12
 931 0200 0895      		ret
 936               	.Lscope14:
 938               		.stabd	78,0,0
 944               	.global	tdma_recv
 946               	tdma_recv:
 947               		.stabd	46,0,0
 263:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 264:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t tdma_recv (tdma_info * fd, uint8_t * buf, uint8_t * len, uint8_t flags)
 265:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 949               	.LM79:
 950               	.LFBB15:
 951 0202 8F92      		push r8
 952 0204 9F92      		push r9
 953 0206 AF92      		push r10
 954 0208 BF92      		push r11
 955 020a CF92      		push r12
 956 020c DF92      		push r13
 957 020e EF92      		push r14
 958 0210 FF92      		push r15
 959 0212 0F93      		push r16
 960 0214 1F93      		push r17
 961 0216 CF93      		push r28
 962 0218 DF93      		push r29
 963 021a 1F92      		push __zero_reg__
 964 021c CDB7      		in r28,__SP_L__
 965 021e DEB7      		in r29,__SP_H__
 966               	/* prologue: function */
 967               	/* frame size = 1 */
 968               	/* stack size = 13 */
 969               	.L__stack_usage = 13
 970 0220 4C01      		movw r8,r24
 971 0222 8B01      		movw r16,r22
 972 0224 5A01      		movw r10,r20
 973 0226 8091 0000 		lds r24,tdma_rx_buf_empty
 266:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   nrk_sig_mask_t event;
 267:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   uint8_t i;
 268:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (flags == TDMA_BLOCKING) {
 975               	.LM80:
 976 022a 2111      		cpse r18,__zero_reg__
 977 022c 00C0      		rjmp .L36
 269:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     if (tdma_rx_buf_empty == 1) {
 979               	.LM81:
 980 022e 8130      		cpi r24,lo8(1)
 981 0230 01F4      		brne .L37
 270:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_signal_register (tdma_rx_pkt_signal);
 983               	.LM82:
 984 0232 8091 0000 		lds r24,tdma_rx_pkt_signal
 985 0236 2983      		std Y+1,r18
 986 0238 0E94 0000 		call nrk_signal_register
 271:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       event = nrk_event_wait (SIG (tdma_rx_pkt_signal));
 988               	.LM83:
 989 023c 81E0      		ldi r24,lo8(1)
 990 023e 90E0      		ldi r25,0
 991 0240 A0E0      		ldi r26,0
 992 0242 B0E0      		ldi r27,0
 993 0244 BC01      		movw r22,r24
 994 0246 CD01      		movw r24,r26
 995 0248 0090 0000 		lds r0,tdma_rx_pkt_signal
 996 024c 00C0      		rjmp 2f
 997               		1:
 998 024e 660F      		lsl r22
 999 0250 771F      		rol r23
 1000 0252 881F      		rol r24
 1001 0254 991F      		rol r25
 1002               		2:
 1003 0256 0A94      		dec r0
 1004 0258 02F4      		brpl 1b
 1005 025a 0E94 0000 		call nrk_event_wait
 1006 025e 6B01      		movw r12,r22
 1007 0260 7C01      		movw r14,r24
 1008 0262 2981      		ldd r18,Y+1
 1009 0264 00C0      		rjmp .L37
 1010               	.L36:
 272:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     }
 273:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   }
 274:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   else if (tdma_rx_buf_empty == 1)
 1012               	.LM84:
 1013 0266 8130      		cpi r24,lo8(1)
 1014 0268 01F4      		brne .L37
 1015               	.L39:
 275:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 1017               	.LM85:
 1018 026a 8FEF      		ldi r24,lo8(-1)
 1019 026c 00C0      		rjmp .L38
 1020               	.L37:
 276:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 277:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (tdma_rfRxInfo.length < TDMA_PCF_HEADER)
 1022               	.LM86:
 1023 026e 8091 0000 		lds r24,tdma_rfRxInfo+3
 1024 0272 8C30      		cpi r24,lo8(12)
 1025 0274 04F0      		brlt .L39
 278:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 279:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   // Set the length
 280:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   *len = (uint8_t) (tdma_rfRxInfo.length - TDMA_PCF_HEADER);
 1027               	.LM87:
 1028 0276 8C50      		subi r24,lo8(-(-12))
 1029 0278 D501      		movw r26,r10
 1030 027a 8C93      		st X,r24
 281:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   // Copy the payload data
 282:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   for (i = 0; i < *len; i++)
 1032               	.LM88:
 1033 027c 80E0      		ldi r24,0
 1034               	.L40:
 1036               	.LM89:
 1037 027e F501      		movw r30,r10
 1038 0280 9081      		ld r25,Z
 1039 0282 8917      		cp r24,r25
 1040 0284 00F4      		brsh .L46
 283:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     buf[i] = tdma_rfRxInfo.pPayload[i + TDMA_PCF_HEADER];
 1042               	.LM90:
 1043 0286 482F      		mov r20,r24
 1044 0288 50E0      		ldi r21,0
 1045 028a E091 0000 		lds r30,tdma_rfRxInfo+5
 1046 028e F091 0000 		lds r31,tdma_rfRxInfo+5+1
 1047 0292 E40F      		add r30,r20
 1048 0294 F51F      		adc r31,r21
 1049 0296 9485      		ldd r25,Z+12
 1050 0298 F801      		movw r30,r16
 1051 029a E40F      		add r30,r20
 1052 029c F51F      		adc r31,r21
 1053 029e 9083      		st Z,r25
 282:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     buf[i] = tdma_rfRxInfo.pPayload[i + TDMA_PCF_HEADER];
 1055               	.LM91:
 1056 02a0 8F5F      		subi r24,lo8(-(1))
 1057 02a2 00C0      		rjmp .L40
 1058               	.L46:
 284:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 285:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   // Fill the information struct
 286:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   fd->rssi = tdma_rfRxInfo.rssi;
 1060               	.LM92:
 1061 02a4 8091 0000 		lds r24,tdma_rfRxInfo+8
 1062 02a8 9927      		clr r25
 1063 02aa 87FD      		sbrc r24,7
 1064 02ac 9095      		com r25
 1065 02ae D401      		movw r26,r8
 1066 02b0 1E96      		adiw r26,13+1
 1067 02b2 9C93      		st X,r25
 1068 02b4 8E93      		st -X,r24
 1069 02b6 1D97      		sbiw r26,13
 287:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   fd->actualRssi = tdma_rfRxInfo.actualRssi;
 1071               	.LM93:
 1072 02b8 8091 0000 		lds r24,tdma_rfRxInfo+9
 1073 02bc 1F96      		adiw r26,15
 1074 02be 8C93      		st X,r24
 1075 02c0 1F97      		sbiw r26,15
 288:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   fd->energyDetectionLevel = tdma_rfRxInfo.energyDetectionLevel;
 1077               	.LM94:
 1078 02c2 8091 0000 		lds r24,tdma_rfRxInfo+10
 1079 02c6 5096      		adiw r26,16
 1080 02c8 8C93      		st X,r24
 1081 02ca 5097      		sbiw r26,16
 289:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   fd->linkQualityIndication = tdma_rfRxInfo.linkQualityIndication;
 1083               	.LM95:
 1084 02cc 8091 0000 		lds r24,tdma_rfRxInfo+11
 1085 02d0 5196      		adiw r26,17
 1086 02d2 8C93      		st X,r24
 1087 02d4 5197      		sbiw r26,17
 290:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   fd->src =
 291:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     ((uint16_t) tdma_rfRxInfo.pPayload[TDMA_SRC_HIGH] << 8) | tdma_rfRxInfo.
 1089               	.LM96:
 1090 02d6 E091 0000 		lds r30,tdma_rfRxInfo+5
 1091 02da F091 0000 		lds r31,tdma_rfRxInfo+5+1
 1092 02de 8581      		ldd r24,Z+5
 1093 02e0 90E0      		ldi r25,0
 1094 02e2 982F      		mov r25,r24
 1095 02e4 8827      		clr r24
 1096 02e6 3481      		ldd r19,Z+4
 1097 02e8 832B      		or r24,r19
 290:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   fd->src =
 1099               	.LM97:
 1100 02ea 1896      		adiw r26,7+1
 1101 02ec 9C93      		st X,r25
 1102 02ee 8E93      		st -X,r24
 1103 02f0 1797      		sbiw r26,7
 292:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     pPayload[TDMA_SRC_LOW];
 293:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   fd->dst =
 294:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     ((uint16_t) tdma_rfRxInfo.pPayload[TDMA_DST_HIGH] << 8) | tdma_rfRxInfo.
 1105               	.LM98:
 1106 02f2 8381      		ldd r24,Z+3
 1107 02f4 90E0      		ldi r25,0
 1108 02f6 982F      		mov r25,r24
 1109 02f8 8827      		clr r24
 1110 02fa 3281      		ldd r19,Z+2
 1111 02fc 832B      		or r24,r19
 293:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     ((uint16_t) tdma_rfRxInfo.pPayload[TDMA_DST_HIGH] << 8) | tdma_rfRxInfo.
 1113               	.LM99:
 1114 02fe 1696      		adiw r26,5+1
 1115 0300 9C93      		st X,r25
 1116 0302 8E93      		st -X,r24
 1117 0304 1597      		sbiw r26,5
 295:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     pPayload[TDMA_DST_LOW];
 296:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   fd->slot =
 297:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     ((uint16_t) tdma_rfRxInfo.pPayload[TDMA_SLOT_HIGH] << 8) | tdma_rfRxInfo.
 1119               	.LM100:
 1120 0306 8181      		ldd r24,Z+1
 1121 0308 90E0      		ldi r25,0
 1122 030a 982F      		mov r25,r24
 1123 030c 8827      		clr r24
 1124 030e 3081      		ld r19,Z
 1125 0310 832B      		or r24,r19
 296:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     ((uint16_t) tdma_rfRxInfo.pPayload[TDMA_SLOT_HIGH] << 8) | tdma_rfRxInfo.
 1127               	.LM101:
 1128 0312 1196      		adiw r26,1
 1129 0314 9C93      		st X,r25
 1130 0316 8E93      		st -X,r24
 298:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     pPayload[TDMA_SLOT_LOW];
 299:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   fd->seq_num =
 300:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     ((uint16_t) tdma_rfRxInfo.
 1132               	.LM102:
 1133 0318 8781      		ldd r24,Z+7
 1134 031a 90E0      		ldi r25,0
 301:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****      pPayload[TDMA_SEQ_NUM_HIGH] << 8) | tdma_rfRxInfo.
 1136               	.LM103:
 1137 031c 982F      		mov r25,r24
 1138 031e 8827      		clr r24
 1139 0320 3681      		ldd r19,Z+6
 1140 0322 832B      		or r24,r19
 299:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     ((uint16_t) tdma_rfRxInfo.
 1142               	.LM104:
 1143 0324 1A96      		adiw r26,9+1
 1144 0326 9C93      		st X,r25
 1145 0328 8E93      		st -X,r24
 1146 032a 1997      		sbiw r26,9
 302:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     pPayload[TDMA_SEQ_NUM_LOW];
 303:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   fd->cycle_size =
 304:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     ((uint16_t) tdma_rfRxInfo.
 1148               	.LM105:
 1149 032c 8185      		ldd r24,Z+9
 1150 032e 90E0      		ldi r25,0
 305:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****      pPayload[TDMA_CYCLE_SIZE_HIGH] << 8) | tdma_rfRxInfo.
 1152               	.LM106:
 1153 0330 982F      		mov r25,r24
 1154 0332 8827      		clr r24
 1155 0334 3085      		ldd r19,Z+8
 1156 0336 832B      		or r24,r19
 303:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     ((uint16_t) tdma_rfRxInfo.
 1158               	.LM107:
 1159 0338 1396      		adiw r26,2+1
 1160 033a 9C93      		st X,r25
 1161 033c 8E93      		st -X,r24
 1162 033e 1297      		sbiw r26,2
 306:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     pPayload[TDMA_CYCLE_SIZE_LOW];
 307:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 308:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   fd->ttl= (uint8_t) tdma_rfRxInfo.pPayload[TDMA_TTL]; 
 1164               	.LM108:
 1165 0340 8285      		ldd r24,Z+10
 1166 0342 1C96      		adiw r26,12
 1167 0344 8C93      		st X,r24
 309:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 310:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 311:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   // Check if it was a time out instead of packet RX signal
 312:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (flags == TDMA_BLOCKING)
 1169               	.LM109:
 1170 0346 2111      		cpse r18,__zero_reg__
 1171 0348 00C0      		rjmp .L42
 313:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     if ((event & SIG (tdma_rx_pkt_signal)) == 0)
 1173               	.LM110:
 1174 034a 0090 0000 		lds r0,tdma_rx_pkt_signal
 1175 034e 00C0      		rjmp 2f
 1176               		1:
 1177 0350 F694      		lsr r15
 1178 0352 E794      		ror r14
 1179 0354 D794      		ror r13
 1180 0356 C794      		ror r12
 1181               		2:
 1182 0358 0A94      		dec r0
 1183 035a 02F4      		brpl 1b
 1184 035c C0FE      		sbrs r12,0
 1185 035e 00C0      		rjmp .L39
 1186               	.L42:
 314:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       return NRK_ERROR;
 315:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 316:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   // Set the buffer as empty
 317:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rx_buf_empty = 1;
 1188               	.LM111:
 1189 0360 81E0      		ldi r24,lo8(1)
 1190 0362 8093 0000 		sts tdma_rx_buf_empty,r24
 1191               	.L38:
 1192               	/* epilogue start */
 318:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return NRK_OK;
 319:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 320:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 1194               	.LM112:
 1195 0366 0F90      		pop __tmp_reg__
 1196 0368 DF91      		pop r29
 1197 036a CF91      		pop r28
 1198 036c 1F91      		pop r17
 1199 036e 0F91      		pop r16
 1200 0370 FF90      		pop r15
 1201 0372 EF90      		pop r14
 1202 0374 DF90      		pop r13
 1203 0376 CF90      		pop r12
 1204 0378 BF90      		pop r11
 1205 037a AF90      		pop r10
 1206 037c 9F90      		pop r9
 1207 037e 8F90      		pop r8
 1208 0380 0895      		ret
 1214               	.Lscope15:
 1216               		.stabd	78,0,0
 1220               	.global	tdma_rx_pkt_set_buffer
 1222               	tdma_rx_pkt_set_buffer:
 1223               		.stabd	46,0,0
 321:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 322:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 323:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t tdma_rx_pkt_set_buffer (uint8_t * buf, uint8_t size)
 324:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1225               	.LM113:
 1226               	.LFBB16:
 1227               	/* prologue: function */
 1228               	/* frame size = 0 */
 1229               	/* stack size = 0 */
 1230               	.L__stack_usage = 0
 325:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (buf == NULL)
 1232               	.LM114:
 1233 0382 0097      		sbiw r24,0
 1234 0384 01F0      		breq .L49
 326:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 327:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfRxInfo.pPayload = buf;
 1236               	.LM115:
 1237 0386 9093 0000 		sts tdma_rfRxInfo+5+1,r25
 1238 038a 8093 0000 		sts tdma_rfRxInfo+5,r24
 328:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfRxInfo.max_length = size;
 1240               	.LM116:
 1241 038e 6093 0000 		sts tdma_rfRxInfo+4,r22
 329:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rx_buf_empty = 1;
 1243               	.LM117:
 1244 0392 81E0      		ldi r24,lo8(1)
 1245 0394 8093 0000 		sts tdma_rx_buf_empty,r24
 330:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return NRK_OK;
 1247               	.LM118:
 1248 0398 0895      		ret
 1249               	.L49:
 326:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfRxInfo.pPayload = buf;
 1251               	.LM119:
 1252 039a 8FEF      		ldi r24,lo8(-1)
 331:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 1254               	.LM120:
 1255 039c 0895      		ret
 1257               	.Lscope16:
 1259               		.stabd	78,0,0
 1262               	.global	tdma_ttl_set
 1264               	tdma_ttl_set:
 1265               		.stabd	46,0,0
 332:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 333:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** void tdma_ttl_set(uint8_t ttl)
 334:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1267               	.LM121:
 1268               	.LFBB17:
 1269               	/* prologue: function */
 1270               	/* frame size = 0 */
 1271               	/* stack size = 0 */
 1272               	.L__stack_usage = 0
 335:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** tdma_ttl=ttl;
 1274               	.LM122:
 1275 039e 8093 0000 		sts tdma_ttl,r24
 1276 03a2 0895      		ret
 1278               	.Lscope17:
 1280               		.stabd	78,0,0
 1284               	.global	tdma_init
 1286               	tdma_init:
 1287               		.stabd	46,0,0
 336:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 337:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 338:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t tdma_init (uint8_t mode, uint8_t chan, uint16_t my_mac)
 339:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1289               	.LM123:
 1290               	.LFBB18:
 1291 03a4 0F93      		push r16
 1292 03a6 1F93      		push r17
 1293 03a8 CF93      		push r28
 1294 03aa DF93      		push r29
 1295               	/* prologue: function */
 1296               	/* frame size = 0 */
 1297               	/* stack size = 4 */
 1298               	.L__stack_usage = 4
 1299 03ac 162F      		mov r17,r22
 1300 03ae D42F      		mov r29,r20
 1301 03b0 052F      		mov r16,r21
 340:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tx_reserve = -1;
 1303               	.LM124:
 1304 03b2 9FEF      		ldi r25,lo8(-1)
 1305 03b4 9093 0000 		sts tx_reserve,r25
 341:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rx_failure_cnt = 0;
 1307               	.LM125:
 1308 03b8 1092 0000 		sts tdma_rx_failure_cnt+1,__zero_reg__
 1309 03bc 1092 0000 		sts tdma_rx_failure_cnt,__zero_reg__
 342:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_mode = mode;
 1311               	.LM126:
 1312 03c0 8093 0000 		sts tdma_mode,r24
 343:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_tx_slots = 0;
 1314               	.LM127:
 1315 03c4 1092 0000 		sts tdma_tx_slots,__zero_reg__
 344:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_ttl=TDMA_DEFAULT_TTL;
 1317               	.LM128:
 1318 03c8 83E0      		ldi r24,lo8(3)
 1319 03ca 8093 0000 		sts tdma_ttl,r24
 345:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   sync_status=0;
 1321               	.LM129:
 1322 03ce 1092 0000 		sts sync_status,__zero_reg__
 346:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 347:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 348:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #ifdef GPIO_DEBUG
 349:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_gpio_direction(NRK_MOSI,NRK_PIN_OUTPUT);
 350:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_gpio_direction(NRK_MISO,NRK_PIN_OUTPUT);
 351:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #endif
 352:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 353:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 354:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_slots_per_cycle = TDMA_DEFAULT_SLOTS_PER_CYCLE;
 1324               	.LM130:
 1325 03d2 80E0      		ldi r24,0
 1326 03d4 94E0      		ldi r25,lo8(4)
 1327 03d6 9093 0000 		sts tdma_slots_per_cycle+1,r25
 1328 03da 8093 0000 		sts tdma_slots_per_cycle,r24
 355:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 356:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   _tdma_slot_time.nano_secs = TDMA_DEFAULT_SLOT_MS * NANOS_PER_MS;
 1330               	.LM131:
 1331 03de 80E8      		ldi r24,lo8(-128)
 1332 03e0 96E9      		ldi r25,lo8(-106)
 1333 03e2 A8E9      		ldi r26,lo8(-104)
 1334 03e4 B0E0      		ldi r27,0
 1335 03e6 8093 0000 		sts _tdma_slot_time+4,r24
 1336 03ea 9093 0000 		sts _tdma_slot_time+4+1,r25
 1337 03ee A093 0000 		sts _tdma_slot_time+4+2,r26
 1338 03f2 B093 0000 		sts _tdma_slot_time+4+3,r27
 357:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   _tdma_slot_time.secs = 0;
 1340               	.LM132:
 1341 03f6 1092 0000 		sts _tdma_slot_time,__zero_reg__
 1342 03fa 1092 0000 		sts _tdma_slot_time+1,__zero_reg__
 1343 03fe 1092 0000 		sts _tdma_slot_time+2,__zero_reg__
 1344 0402 1092 0000 		sts _tdma_slot_time+3,__zero_reg__
 358:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 359:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rx_pkt_signal = nrk_signal_create ();
 1346               	.LM133:
 1347 0406 0E94 0000 		call nrk_signal_create
 1348 040a C82F      		mov r28,r24
 1349 040c 8093 0000 		sts tdma_rx_pkt_signal,r24
 360:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (tdma_rx_pkt_signal == NRK_ERROR) {
 1351               	.LM134:
 1352 0410 8F3F      		cpi r24,lo8(-1)
 1353 0412 01F4      		brne .L52
 361:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_kprintf (PSTR ("TDMA ERROR: creating rx signal failed\r\n"));
 1355               	.LM135:
 1356 0414 80E0      		ldi r24,lo8(__c.3739)
 1357 0416 90E0      		ldi r25,hi8(__c.3739)
 1358 0418 00C0      		rjmp .L58
 1359               	.L52:
 362:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_kernel_error_add (NRK_SIGNAL_CREATE_ERROR, nrk_cur_task_TCB->task_ID);
 363:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 364:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   }
 365:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_tx_pkt_done_signal = nrk_signal_create ();
 1361               	.LM136:
 1362 041a 0E94 0000 		call nrk_signal_create
 1363 041e C82F      		mov r28,r24
 1364 0420 8093 0000 		sts tdma_tx_pkt_done_signal,r24
 366:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (tdma_tx_pkt_done_signal == NRK_ERROR) {
 1366               	.LM137:
 1367 0424 8F3F      		cpi r24,lo8(-1)
 1368 0426 01F4      		brne .L54
 367:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_kprintf (PSTR ("TDMA ERROR: creating tx signal failed\r\n"));
 1370               	.LM138:
 1371 0428 80E0      		ldi r24,lo8(__c.3741)
 1372 042a 90E0      		ldi r25,hi8(__c.3741)
 1373               	.L58:
 1374 042c 0E94 0000 		call nrk_kprintf
 368:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_kernel_error_add (NRK_SIGNAL_CREATE_ERROR, nrk_cur_task_TCB->task_ID);
 1376               	.LM139:
 1377 0430 E091 0000 		lds r30,nrk_cur_task_TCB
 1378 0434 F091 0000 		lds r31,nrk_cur_task_TCB+1
 1379 0438 6085      		ldd r22,Z+8
 1380 043a 8EE0      		ldi r24,lo8(14)
 1381 043c 0E94 0000 		call nrk_kernel_error_add
 369:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 1383               	.LM140:
 1384 0440 00C0      		rjmp .L53
 1385               	.L54:
 370:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   }
 371:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_enable_signal = nrk_signal_create ();
 1387               	.LM141:
 1388 0442 0E94 0000 		call nrk_signal_create
 1389 0446 C82F      		mov r28,r24
 1390 0448 8093 0000 		sts tdma_enable_signal,r24
 372:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (tdma_enable_signal == NRK_ERROR) {
 1392               	.LM142:
 1393 044c 8F3F      		cpi r24,lo8(-1)
 1394 044e 01F4      		brne .L57
 373:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_kprintf (PSTR ("TDMA ERROR: creating enable signal failed\r\n"));
 1396               	.LM143:
 1397 0450 80E0      		ldi r24,lo8(__c.3743)
 1398 0452 90E0      		ldi r25,hi8(__c.3743)
 1399 0454 00C0      		rjmp .L58
 1400               	.L57:
 1401               	.LBB12:
 1402               	.LBB13:
 327:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rfRxInfo.max_length = size;
 1404               	.LM144:
 1405 0456 80E0      		ldi r24,lo8(tdma_rx_buf)
 1406 0458 90E0      		ldi r25,hi8(tdma_rx_buf)
 1407 045a 9093 0000 		sts tdma_rfRxInfo+5+1,r25
 1408 045e 8093 0000 		sts tdma_rfRxInfo+5,r24
 328:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rx_buf_empty = 1;
 1410               	.LM145:
 1411 0462 80E7      		ldi r24,lo8(112)
 1412 0464 8093 0000 		sts tdma_rfRxInfo+4,r24
 1413               	.LBE13:
 1414               	.LBE12:
 374:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_kernel_error_add (NRK_SIGNAL_CREATE_ERROR, nrk_cur_task_TCB->task_ID);
 375:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 376:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   }
 377:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 378:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 379:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   // Set the one main rx buffer
 380:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rx_pkt_set_buffer (tdma_rx_buf, TDMA_MAX_PKT_SIZE);
 381:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_rx_buf_empty = 1;
 1416               	.LM146:
 1417 0468 C1E0      		ldi r28,lo8(1)
 1418 046a C093 0000 		sts tdma_rx_buf_empty,r28
 382:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tx_data_ready = 0;
 1420               	.LM147:
 1421 046e 1092 0000 		sts tx_data_ready,__zero_reg__
 383:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 384:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 385:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   // Setup the radio 
 386:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   rf_init (&tdma_rfRxInfo, chan, 0xffff, my_mac);
 1423               	.LM148:
 1424 0472 2D2F      		mov r18,r29
 1425 0474 302F      		mov r19,r16
 1426 0476 4FEF      		ldi r20,lo8(-1)
 1427 0478 5FEF      		ldi r21,lo8(-1)
 1428 047a 612F      		mov r22,r17
 1429 047c 80E0      		ldi r24,lo8(tdma_rfRxInfo)
 1430 047e 90E0      		ldi r25,hi8(tdma_rfRxInfo)
 1431 0480 0E94 0000 		call rf_init
 387:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_chan = chan;
 1433               	.LM149:
 1434 0484 1093 0000 		sts tdma_chan,r17
 388:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_my_mac = my_mac;
 1436               	.LM150:
 1437 0488 D093 0000 		sts tdma_my_mac,r29
 389:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 390:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   //FASTSPI_SETREG (CC2420_RSSI, 0xE580); // CCA THR=-25
 391:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   //FASTSPI_SETREG (CC2420_TXCTRL, 0x80FF);       // TX TURNAROUND = 128 us
 392:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   //FASTSPI_SETREG (CC2420_RXCTRL1, 0x0A56);
 393:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   // default cca thresh of -45
 394:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   rf_set_cca_thresh (-45);
 1439               	.LM151:
 1440 048c 83ED      		ldi r24,lo8(-45)
 1441 048e 9FEF      		ldi r25,lo8(-1)
 1442 0490 0E94 0000 		call rf_set_cca_thresh
 395:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 396:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   asm volatile ("":::"memory");
 1444               	.LM152:
 397:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_running = 1;
 1446               	.LM153:
 1447 0494 C093 0000 		sts tdma_running,r28
 398:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_is_enabled = 1;
 1449               	.LM154:
 1450 0498 C093 0000 		sts tdma_is_enabled,r28
 1451               	.L53:
 399:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return NRK_OK;
 400:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 1453               	.LM155:
 1454 049c 8C2F      		mov r24,r28
 1455               	/* epilogue start */
 1456 049e DF91      		pop r29
 1457 04a0 CF91      		pop r28
 1458 04a2 1F91      		pop r17
 1459 04a4 0F91      		pop r16
 1460 04a6 0895      		ret
 1462               	.Lscope18:
 1464               		.stabd	78,0,0
 1466               	.global	tdma_get_rx_pkt_signal
 1468               	tdma_get_rx_pkt_signal:
 1469               		.stabd	46,0,0
 401:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 402:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 403:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** nrk_sig_t tdma_get_rx_pkt_signal ()
 404:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1471               	.LM156:
 1472               	.LFBB19:
 1473               	/* prologue: function */
 1474               	/* frame size = 0 */
 1475               	/* stack size = 0 */
 1476               	.L__stack_usage = 0
 405:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   nrk_signal_register (tdma_rx_pkt_signal);
 1478               	.LM157:
 1479 04a8 8091 0000 		lds r24,tdma_rx_pkt_signal
 1480 04ac 0E94 0000 		call nrk_signal_register
 406:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return (tdma_rx_pkt_signal);
 407:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 1482               	.LM158:
 1483 04b0 8091 0000 		lds r24,tdma_rx_pkt_signal
 1484 04b4 0895      		ret
 1486               	.Lscope19:
 1488               		.stabd	78,0,0
 1490               	.global	tdma_get_tx_done_signal
 1492               	tdma_get_tx_done_signal:
 1493               		.stabd	46,0,0
 408:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 409:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** nrk_sig_t tdma_get_tx_done_signal ()
 410:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1495               	.LM159:
 1496               	.LFBB20:
 1497               	/* prologue: function */
 1498               	/* frame size = 0 */
 1499               	/* stack size = 0 */
 1500               	.L__stack_usage = 0
 411:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   nrk_signal_register (tdma_tx_pkt_done_signal);
 1502               	.LM160:
 1503 04b6 8091 0000 		lds r24,tdma_tx_pkt_done_signal
 1504 04ba 0E94 0000 		call nrk_signal_register
 412:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return (tdma_tx_pkt_done_signal);
 413:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 1506               	.LM161:
 1507 04be 8091 0000 		lds r24,tdma_tx_pkt_done_signal
 1508 04c2 0895      		ret
 1510               	.Lscope20:
 1512               		.stabd	78,0,0
 1516               	.global	tdma_rx_pkt_get
 1518               	tdma_rx_pkt_get:
 1519               		.stabd	46,0,0
 414:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 415:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 416:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 417:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** uint8_t *tdma_rx_pkt_get (uint8_t * len, int8_t * rssi)
 418:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1521               	.LM162:
 1522               	.LFBB21:
 1523               	/* prologue: function */
 1524               	/* frame size = 0 */
 1525               	/* stack size = 0 */
 1526               	.L__stack_usage = 0
 419:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 420:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (tdma_rx_buf_empty == 1) {
 1528               	.LM163:
 1529 04c4 2091 0000 		lds r18,tdma_rx_buf_empty
 1530 04c8 2130      		cpi r18,lo8(1)
 1531 04ca 01F4      		brne .L62
 421:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     *len = 0;
 1533               	.LM164:
 1534 04cc FC01      		movw r30,r24
 1535 04ce 1082      		st Z,__zero_reg__
 422:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     *rssi = 0;
 1537               	.LM165:
 1538 04d0 FB01      		movw r30,r22
 1539 04d2 1082      		st Z,__zero_reg__
 423:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NULL;
 1541               	.LM166:
 1542 04d4 80E0      		ldi r24,0
 1543 04d6 90E0      		ldi r25,0
 1544 04d8 0895      		ret
 1545               	.L62:
 424:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   }
 425:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   *len = tdma_rfRxInfo.length;
 1547               	.LM167:
 1548 04da 2091 0000 		lds r18,tdma_rfRxInfo+3
 1549 04de FC01      		movw r30,r24
 1550 04e0 2083      		st Z,r18
 426:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   *rssi = tdma_rfRxInfo.rssi;
 1552               	.LM168:
 1553 04e2 8091 0000 		lds r24,tdma_rfRxInfo+8
 1554 04e6 FB01      		movw r30,r22
 1555 04e8 8083      		st Z,r24
 427:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return tdma_rfRxInfo.pPayload;
 1557               	.LM169:
 1558 04ea 8091 0000 		lds r24,tdma_rfRxInfo+5
 1559 04ee 9091 0000 		lds r25,tdma_rfRxInfo+5+1
 428:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 1561               	.LM170:
 1562 04f2 0895      		ret
 1564               	.Lscope21:
 1566               		.stabd	78,0,0
 1568               	.global	tdma_rx_pkt_release
 1570               	tdma_rx_pkt_release:
 1571               		.stabd	46,0,0
 429:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 430:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 431:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t tdma_rx_pkt_release(void)
 432:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1573               	.LM171:
 1574               	.LFBB22:
 1575               	/* prologue: function */
 1576               	/* frame size = 0 */
 1577               	/* stack size = 0 */
 1578               	.L__stack_usage = 0
 433:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     tdma_rx_buf_empty=1;
 1580               	.LM172:
 1581 04f4 81E0      		ldi r24,lo8(1)
 1582 04f6 8093 0000 		sts tdma_rx_buf_empty,r24
 434:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** return NRK_OK;
 435:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 1584               	.LM173:
 1585 04fa 0895      		ret
 1587               	.Lscope22:
 1589               		.stabd	78,0,0
 1591               	.global	tdma_disable
 1593               	tdma_disable:
 1594               		.stabd	46,0,0
 436:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 437:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 438:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** void tdma_disable ()
 439:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1596               	.LM174:
 1597               	.LFBB23:
 1598               	/* prologue: function */
 1599               	/* frame size = 0 */
 1600               	/* stack size = 0 */
 1601               	.L__stack_usage = 0
 440:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_is_enabled = 0;
 1603               	.LM175:
 1604 04fc 1092 0000 		sts tdma_is_enabled,__zero_reg__
 441:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   rf_power_down ();
 1606               	.LM176:
 1607 0500 0C94 0000 		jmp rf_power_down
 1609               	.Lscope23:
 1611               		.stabd	78,0,0
 1613               	.global	tdma_enable
 1615               	tdma_enable:
 1616               		.stabd	46,0,0
 442:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 443:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 444:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** void tdma_enable ()
 445:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1618               	.LM177:
 1619               	.LFBB24:
 1620               	/* prologue: function */
 1621               	/* frame size = 0 */
 1622               	/* stack size = 0 */
 1623               	.L__stack_usage = 0
 446:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_is_enabled = 1;
 1625               	.LM178:
 1626 0504 81E0      		ldi r24,lo8(1)
 1627 0506 8093 0000 		sts tdma_is_enabled,r24
 447:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   rf_power_up ();
 1629               	.LM179:
 1630 050a 0E94 0000 		call rf_power_up
 448:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   nrk_event_signal (tdma_enable_signal);
 1632               	.LM180:
 1633 050e 8091 0000 		lds r24,tdma_enable_signal
 1634 0512 0C94 0000 		jmp nrk_event_signal
 1636               	.Lscope24:
 1638               		.stabd	78,0,0
 1640               	.global	tdma_wakeup
 1642               	tdma_wakeup:
 1643               		.stabd	46,0,0
 449:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 450:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 451:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 452:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** void tdma_nw_task ()
 453:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 454:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   int8_t v, i;
 455:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   uint16_t slot, tmp,tmp2,sync;
 456:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   nrk_sig_mask_t event;
 457:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 458:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   do {
 459:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_wait_until_next_period ();
 460:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   } while (!tdma_started ());
 461:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 462:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** //register the signal after bmac_init has been called
 463:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   v = nrk_signal_register (tdma_enable_signal);
 464:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (v == NRK_ERROR)
 465:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_kprintf (PSTR ("Failed to register signal\r\n"));
 466:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   slot = 0;
 467:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** //rf_set_rx (&tdma_rfRxInfo, tdma_chan);
 468:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 469:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 470:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 471:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   while (1) {
 472:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     if (tdma_mode == TDMA_HOST) {
 473:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	    sync_status=1; // HOST is always synced
 474:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       // This is the downstream transmit slot
 475:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       if (slot == 0) {
 476:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 477:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         //  for(i=0; i<100; i++ ) tdma_rfTxInfo.pPayload[i] = 0;  
 478:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         //rf_rx_off();
 479:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         // If there is no pending packet, lets make an empty one
 480:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         if (tx_data_ready == 0) {
 481:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.pPayload = tdma_tx_buf;
 482:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           // Setup the header data
 483:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.pPayload[TDMA_DST_LOW] = 0xff;  // dst
 484:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.pPayload[TDMA_DST_HIGH] = 0xff;
 485:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.pPayload[TDMA_SRC_LOW] = 0x00;  // src
 486:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.pPayload[TDMA_SRC_HIGH] = 0x00;
 487:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.pPayload[TDMA_SEQ_NUM_LOW] = 0x00;      // seq num
 488:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.pPayload[TDMA_SEQ_NUM_HIGH] = 0x00;
 489:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.length = TDMA_PCF_HEADER;
 490:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         }
 491:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_CYCLE_SIZE_LOW] = tdma_slots_per_cycle & 0xff;      // cycle si
 492:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_CYCLE_SIZE_HIGH] =
 493:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_slots_per_cycle >> 8;
 494:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_SLOT_LOW] = 0;      // slot
 495:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_SLOT_HIGH] = 0;
 496:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_TTL] = tdma_ttl<<4 | (tdma_ttl);
 497:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_SLOT_SIZE] = tdma_slot_len_ms;
 498:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_get (&_tdma_next_wakeup);
 499:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.destAddr = 0xffff;
 500:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.ackRequest = 0;
 501:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.cca = 0;
 502:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         _tdma_tx ();
 503:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         rf_rx_on ();
 504:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	if(tdma_wakeup_flag==1)
 505:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		{
 506:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		for(slot=0; slot<1000; slot++ )
 507:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 			{
 508:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 				if((slot%5)==0)nrk_led_toggle(BLUE_LED);
 509:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         			tdma_rfTxInfo.pPayload[TDMA_SLOT_LOW] = 0xff;      // slot
 510:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         			tdma_rfTxInfo.pPayload[TDMA_SLOT_HIGH] = 0xff;
 511:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           			tdma_rfTxInfo.pPayload[TDMA_SRC_LOW] = 0x0;  // src
 512:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           			tdma_rfTxInfo.pPayload[TDMA_SRC_HIGH] = 0x0;
 513:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           			tdma_rfTxInfo.length = TDMA_PCF_HEADER;
 514:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         			_tdma_tx ();
 515:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         			//rf_rx_on ();
 516:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 				nrk_wait_until_ticks(10);
 517:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 			}
 518:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		nrk_led_clr(BLUE_LED);
 519:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		slot=0;
 520:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		tdma_wakeup_flag=0;
 521:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		}
 522:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       }
 523:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       else {
 524:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         // Upstream data slot
 525:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         // This configures the packet receive interrupt to call the _tdma_rx_master function
 526:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         // The _tdma_rx_master function triggers a signal to the tdma_rx function.
 527:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         // rf_rx_on();
 528:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	// rx_end_callback(&_tdma_rx_master);
 529:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         _tdma_rx_master();
 530:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         if (v == 1)
 531:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_last_tx_slot = slot;
 532:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       }
 533:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       slot++;
 534:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	// For the last slot, we wakeup a bit late to make sure all other nodes have woken up in time to
 535:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	// receive the beacon message.  
 536:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       if (slot > tdma_slots_per_cycle ){
 537:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_wait_until_ticks(TDMA_WAKEUP_GAURD_TIME_MS);
 538:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	slot = 0;
 539:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	}
 540:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       else {
 541:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_time_add (&_tdma_next_wakeup, _tdma_next_wakeup, _tdma_slot_time);
 542:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_time_compact_nanos (&_tdma_next_wakeup);
 543:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_wait_until (_tdma_next_wakeup);
 544:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	
 545:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       }
 546:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     }
 547:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     // TDMA slave node
 548:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     else {
 549:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       if (slot == 0) {
 550:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 551:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	//rf_rx_off ();
 552:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	//rf_power_down();
 553:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	      	
 554:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	sync=0;
 555:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	rf_power_up();
 556:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	rf_rx_on ();
 557:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         do {
 558:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           v = _tdma_rx ();
 559:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           nrk_time_get (&_tdma_next_wakeup);
 560:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           if (v == NRK_OK) {
 561:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 562:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	    // See if its part of a wakeup packet stream
 563:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****             tmp =
 564:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****               (tdma_rfRxInfo.pPayload[TDMA_SRC_HIGH] << 8) | tdma_rfRxInfo.
 565:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****               pPayload[TDMA_SRC_LOW];
 566:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	    // Check if its slot 0 packet
 567:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****             tmp2 =
 568:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****               (tdma_rfRxInfo.pPayload[TDMA_SLOT_HIGH] << 8) | tdma_rfRxInfo.
 569:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****               pPayload[TDMA_SLOT_LOW];
 570:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 571:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	    if(tmp==0x0 && tmp2==0xffff) sync=0;
 572:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 573:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****             if (tmp2 != 0) {
 574:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****               v = NRK_ERROR;
 575:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           	tdma_rx_buf_empty = 1;
 576:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	      // agr remove next 3 lines?
 577:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		//rf_rx_off();
 578:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		//rf_power_down();
 579:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	      	//nrk_wait_until_next_period();
 580:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	      	//rf_rx_on();
 581:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	    }
 582:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	    if(v!=NRK_ERROR)
 583:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	    {
 584:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	    // set TTL to TTL_MAX from gateway
 585:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	    tdma_ttl = tdma_rfRxInfo.pPayload[TDMA_TTL]>>4;
 586:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****             tdma_slots_per_cycle =
 587:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****               (tdma_rfRxInfo.
 588:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****                pPayload[TDMA_CYCLE_SIZE_HIGH] << 8) | tdma_rfRxInfo.
 589:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****               pPayload[TDMA_CYCLE_SIZE_LOW];
 590:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****             tdma_slot_len_ms = tdma_rfRxInfo.pPayload[TDMA_SLOT_SIZE];
 591:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****             _tdma_slot_time.nano_secs = tdma_slot_len_ms * NANOS_PER_MS;
 592:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****             _tdma_slot_time.secs = 0;
 593:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	    }
 594:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           }
 595:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	  // Make this time based so that it doesn't get shorter with non sync packets
 596:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	  if(sync>=100) { 
 597:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		  		sync_status=0; /*nrk_led_set(RED_LED);*/ 
 598:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 				//sync=30000; 
 599:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 				if(tdma_error_callback!=NULL ) i=tdma_error_callback(sync-100);
 600:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		if(i==NRK_OK) { tdma_rx_buf_empty=1; /*nrk_kprintf( PSTR("sync=0\r\n"));*/ sync=0; }
 601:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	  } 
 602:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	  if(sync<30000 ) sync++;
 603:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	tdma_rx_pkt_release();
 604:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         } while (v != NRK_OK);
 605:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       //if(sync==30000)  sync_status=1; /*nrk_led_clr(RED_LED);*/ 
 606:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       }
 607:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 608:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       // Compute TTL offset
 609:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       ttl_delay=(tdma_rfRxInfo.pPayload[TDMA_TTL]>>4)-(tdma_rfRxInfo.pPayload[TDMA_TTL]&0xf);
 610:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       if(ttl_delay>16) ttl_delay=0;
 611:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       _ttl_delay_total.secs=0;
 612:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       _ttl_delay_total.nano_secs=0;
 613:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       _ttl_delay_per_tx.secs=0;
 614:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       _ttl_delay_per_tx.nano_secs=0;
 615:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 616:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       _ttl_delay_per_tx.secs=0;
 617:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       _ttl_delay_per_tx.nano_secs=((uint32_t)tdma_rfRxInfo.length+(uint32_t)17)*32000;   // (payloa
 618:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 619:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       for (tmp = 0; tmp < ttl_delay; tmp++)
 620:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_add (&_ttl_delay_total, _ttl_delay_total, _ttl_delay_per_tx);
 621:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 622:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 623:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       sync_status=1;
 624:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	rf_rx_off ();
 625:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	rf_power_down();
 626:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 627:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       // Find next slot
 628:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       slot = tdma_tx_sched[0];
 629:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       if (slot > tdma_slots_per_cycle)
 630:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         slot = tdma_slots_per_cycle;
 631:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****  //         nrk_time_get (&tmp_time);
 632:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** //      printf( "tt=%lu %lu\r\n",tmp_time.secs,tmp_time.nano_secs/NANOS_PER_MS);
 633:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** //      printf( "nw=%lu %lu\r\n",_tdma_next_wakeup.secs,_tdma_next_wakeup.nano_secs/NANOS_PER_MS);
 634:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       for (tmp = 0; tmp < slot; tmp++)
 635:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_add (&_tdma_next_wakeup, _tdma_next_wakeup, _tdma_slot_time);
 636:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       // Subtract TTL delay time
 637:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_time_sub(&_tdma_next_wakeup, _tdma_next_wakeup, _ttl_delay_total);
 638:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 639:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_time_compact_nanos (&_tdma_next_wakeup);
 640:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 641:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   //    printf( "nw2=%lu %lu\r\n",_tdma_next_wakeup.secs,_tdma_next_wakeup.nano_secs/NANOS_PER_MS);
 642:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_wait_until (_tdma_next_wakeup);
 643:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 644:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       // Transmit on slot
 645:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       if (tx_data_ready == 1) {
 646:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_SLOT_LOW] = slot & 0xff;    // slot
 647:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_SLOT_HIGH] = slot >> 8;
 648:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.destAddr = 0xffff;
 649:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.ackRequest = 0;
 650:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.cca = 0;
 651:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	rf_power_up();
 652:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         _tdma_tx ();
 653:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       }
 654:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 655:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       // Sleep until end of cycle 
 656:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	rf_rx_off ();
 657:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	rf_power_down();
 658:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       for (tmp = 0; tmp < ((uint16_t)tdma_slots_per_cycle - (uint16_t)slot); tmp++)
 659:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_add (&_tdma_next_wakeup, _tdma_next_wakeup, _tdma_slot_time);
 660:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_time_compact_nanos (&_tdma_next_wakeup);
 661:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_wait_until (_tdma_next_wakeup);
 662:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       slot = 0;
 663:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       while(!tdma_is_enabled) nrk_wait_until_next_period();
 664:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		
 665:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       slot=0;
 666:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     }
 667:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   }
 668:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 669:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 670:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 671:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** void tdma_wakeup()
 672:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1645               	.LM181:
 1646               	.LFBB25:
 1647               	/* prologue: function */
 1648               	/* frame size = 0 */
 1649               	/* stack size = 0 */
 1650               	.L__stack_usage = 0
 673:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** tdma_wakeup_flag=1;
 1652               	.LM182:
 1653 0516 81E0      		ldi r24,lo8(1)
 1654 0518 8093 0000 		sts tdma_wakeup_flag,r24
 1655 051c 0895      		ret
 1657               	.Lscope25:
 1659               		.stabd	78,0,0
 1661               	.global	tdma_started
 1663               	tdma_started:
 1664               		.stabd	46,0,0
 674:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 675:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 676:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 677:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t tdma_started ()
 678:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1666               	.LM183:
 1667               	.LFBB26:
 1668               	/* prologue: function */
 1669               	/* frame size = 0 */
 1670               	/* stack size = 0 */
 1671               	.L__stack_usage = 0
 679:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return tdma_running;
 1673               	.LM184:
 1674 051e 8091 0000 		lds r24,tdma_running
 680:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 1676               	.LM185:
 1677 0522 0895      		ret
 1679               	.Lscope26:
 1681               		.stabd	78,0,0
 1683               	.global	_tdma_rx_master
 1685               	_tdma_rx_master:
 1686               		.stabd	46,0,0
 681:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 682:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 683:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t _tdma_rx_master ()
 684:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1688               	.LM186:
 1689               	.LFBB27:
 1690               	/* prologue: function */
 1691               	/* frame size = 0 */
 1692               	/* stack size = 0 */
 1693               	.L__stack_usage = 0
 685:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   int8_t v, i;
 686:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   static uint8_t cnt=0;
 687:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   v = 0;
 688:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   
 689:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (tdma_rx_buf_empty != 1) {
 1695               	.LM187:
 1696 0524 8091 0000 		lds r24,tdma_rx_buf_empty
 1697 0528 8130      		cpi r24,lo8(1)
 1698 052a 01F0      		breq .L70
 690:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     rf_rx_off();
 1700               	.LM188:
 1701 052c 0E94 0000 		call rf_rx_off
 691:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     rf_rx_on();
 1703               	.LM189:
 1704 0530 0E94 0000 		call rf_rx_on
 692:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     cnt++;
 1706               	.LM190:
 1707 0534 8091 0000 		lds r24,cnt.3801
 1708 0538 8F5F      		subi r24,lo8(-(1))
 1709 053a 8093 0000 		sts cnt.3801,r24
 693:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     // catch annoying race condition, FIXME: why does this really happen?
 694:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     if(cnt>2){ tdma_rx_buf_empty=0;
 1711               	.LM191:
 1712 053e 8330      		cpi r24,lo8(3)
 1713 0540 00F0      		brlo .L78
 1715               	.LM192:
 1716 0542 1092 0000 		sts tdma_rx_buf_empty,__zero_reg__
 695:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           nrk_event_signal (tdma_rx_pkt_signal);
 1718               	.LM193:
 1719 0546 8091 0000 		lds r24,tdma_rx_pkt_signal
 1720 054a 0E94 0000 		call nrk_event_signal
 1721               	.L78:
 696:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	}
 697:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 1723               	.LM194:
 1724 054e 8FEF      		ldi r24,lo8(-1)
 1725 0550 0895      		ret
 1726               	.L70:
 1727               	.LBB16:
 1728               	.LBB17:
 698:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     }
 699:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** cnt=0;
 1730               	.LM195:
 1731 0552 1092 0000 		sts cnt.3801,__zero_reg__
 700:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #ifdef GPIO_DEBUG
 701:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_gpio_set(NRK_MISO);
 702:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #endif
 703:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** //  if (rf_rx_check_fifop () == 1) {
 704:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   //    v = rf_polling_rx_packet ();
 705:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   v = rf_rx_packet_nonblock ();
 1733               	.LM196:
 1734 0556 0E94 0000 		call rf_rx_packet_nonblock
 706:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       if (v == 1) {
 1736               	.LM197:
 1737 055a 8130      		cpi r24,lo8(1)
 1738 055c 01F4      		brne .L72
 707:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         // Grab packet, do good stuff
 708:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         if (tdma_rfRxInfo.length > TDMA_PCF_HEADER) {
 1740               	.LM198:
 1741 055e 6091 0000 		lds r22,tdma_rfRxInfo+3
 1742 0562 6D30      		cpi r22,lo8(13)
 1743 0564 04F0      		brlt .L77
 709:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	if(_tdma_aes_enabled)
 1745               	.LM199:
 1746 0566 8091 0000 		lds r24,_tdma_aes_enabled
 1747 056a 8111      		cpse r24,__zero_reg__
 1748 056c 00C0      		rjmp .L73
 1749               	.L75:
 710:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	{
 711:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           aes_decrypt(tdma_rfRxInfo.pPayload, tdma_rfRxInfo.length );
 712:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	  if(tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-1]!= 0xCA ||
 713:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-2]!= 0xFE ||
 714:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-3]!= 0xBE ||
 715:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-4]!= 0xEF ) 
 716:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		{
 717:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   		#ifdef GPIO_DEBUG
 718:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****    		 	nrk_gpio_clr(NRK_MISO);
 719:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   		#endif
 720:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 			return NRK_ERROR; 
 721:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		}
 722:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	 }
 723:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	  tdma_rx_buf_empty = 0;
 1751               	.LM200:
 1752 056e 1092 0000 		sts tdma_rx_buf_empty,__zero_reg__
 724:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           nrk_event_signal (tdma_rx_pkt_signal);
 1754               	.LM201:
 1755 0572 8091 0000 		lds r24,tdma_rx_pkt_signal
 1756 0576 0E94 0000 		call nrk_event_signal
 1757 057a 00C0      		rjmp .L77
 1758               	.L73:
 711:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	  if(tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-1]!= 0xCA ||
 1760               	.LM202:
 1761 057c 8091 0000 		lds r24,tdma_rfRxInfo+5
 1762 0580 9091 0000 		lds r25,tdma_rfRxInfo+5+1
 1763 0584 0E94 0000 		call aes_decrypt
 712:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-2]!= 0xFE ||
 1765               	.LM203:
 1766 0588 8091 0000 		lds r24,tdma_rfRxInfo+5
 1767 058c 9091 0000 		lds r25,tdma_rfRxInfo+5+1
 1768 0590 2091 0000 		lds r18,tdma_rfRxInfo+3
 1769 0594 820F      		add r24,r18
 1770 0596 911D      		adc r25,__zero_reg__
 1771 0598 27FD      		sbrc r18,7
 1772 059a 9A95      		dec r25
 1773 059c FC01      		movw r30,r24
 1774 059e 3197      		sbiw r30,1
 1775 05a0 2081      		ld r18,Z
 1776 05a2 2A3C      		cpi r18,lo8(-54)
 1777 05a4 01F4      		brne .L78
 713:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-3]!= 0xBE ||
 1779               	.LM204:
 1780 05a6 3197      		sbiw r30,1
 712:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-2]!= 0xFE ||
 1782               	.LM205:
 1783 05a8 2081      		ld r18,Z
 1784 05aa 2E3F      		cpi r18,lo8(-2)
 1785 05ac 01F4      		brne .L78
 714:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-4]!= 0xEF ) 
 1787               	.LM206:
 1788 05ae 3197      		sbiw r30,1
 713:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-3]!= 0xBE ||
 1790               	.LM207:
 1791 05b0 2081      		ld r18,Z
 1792 05b2 2E3B      		cpi r18,lo8(-66)
 1793 05b4 01F4      		brne .L78
 715:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		{
 1795               	.LM208:
 1796 05b6 3197      		sbiw r30,1
 714:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-4]!= 0xEF ) 
 1798               	.LM209:
 1799 05b8 8081      		ld r24,Z
 1800 05ba 8F3E      		cpi r24,lo8(-17)
 1801 05bc 01F0      		breq .L75
 1802 05be 00C0      		rjmp .L78
 1803               	.L77:
 708:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	if(_tdma_aes_enabled)
 1805               	.LM210:
 1806 05c0 81E0      		ldi r24,lo8(1)
 1807               	.L72:
 1808               	.LBE17:
 1809               	.LBE16:
 725:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         }
 726:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       }
 727:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 728:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #ifdef GPIO_DEBUG
 729:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_gpio_clr(NRK_MISO);
 730:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #endif
 731:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 732:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return v;
 733:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 1811               	.LM211:
 1812 05c2 0895      		ret
 1820               	.Lscope27:
 1822               		.stabd	78,0,0
 1824               	.global	_tdma_rx
 1826               	_tdma_rx:
 1827               		.stabd	46,0,0
 734:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 735:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 736:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t _tdma_rx ()
 737:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1829               	.LM212:
 1830               	.LFBB28:
 1831 05c4 CF93      		push r28
 1832 05c6 DF93      		push r29
 1833               	/* prologue: function */
 1834               	/* frame size = 0 */
 1835               	/* stack size = 2 */
 1836               	.L__stack_usage = 2
 738:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   int8_t v, i;
 739:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   v = 0;
 740:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 741:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (tdma_rx_buf_empty != 1)
 1838               	.LM213:
 1839 05c8 8091 0000 		lds r24,tdma_rx_buf_empty
 1840 05cc 8130      		cpi r24,lo8(1)
 1841 05ce 01F0      		breq .L86
 1842               	.L84:
 742:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     return NRK_ERROR;
 1844               	.LM214:
 1845 05d0 8FEF      		ldi r24,lo8(-1)
 1846 05d2 00C0      		rjmp .L81
 1847               	.L86:
 1848 05d4 D4E6      		ldi r29,lo8(100)
 1849               	.L80:
 743:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 744:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #ifdef GPIO_DEBUG
 745:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_gpio_set(NRK_MISO);
 746:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #endif
 747:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** //  if (rf_rx_check_fifop () == 1) {
 748:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     for (i = 0; i < 100; i++) {
 749:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   //    v = rf_polling_rx_packet ();
 750:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   v = rf_rx_packet_nonblock ();
 1851               	.LM215:
 1852 05d6 0E94 0000 		call rf_rx_packet_nonblock
 1853 05da C82F      		mov r28,r24
 751:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       if (v == 1) {
 1855               	.LM216:
 1856 05dc 8130      		cpi r24,lo8(1)
 1857 05de 01F4      		brne .L82
 752:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         // Grab packet, do good stuff
 753:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         if (tdma_rfRxInfo.length > TDMA_PCF_HEADER) {
 1859               	.LM217:
 1860 05e0 6091 0000 		lds r22,tdma_rfRxInfo+3
 1861 05e4 6D30      		cpi r22,lo8(13)
 1862 05e6 04F0      		brlt .L87
 754:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	if(_tdma_aes_enabled)
 1864               	.LM218:
 1865 05e8 8091 0000 		lds r24,_tdma_aes_enabled
 1866 05ec 8111      		cpse r24,__zero_reg__
 1867 05ee 00C0      		rjmp .L83
 1868               	.L85:
 755:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	{
 756:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           aes_decrypt(tdma_rfRxInfo.pPayload, tdma_rfRxInfo.length );
 757:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	  if(tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-1]!= 0xCA ||
 758:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-2]!= 0xFE ||
 759:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-3]!= 0xBE ||
 760:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-4]!= 0xEF ) {
 761:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #ifdef GPIO_DEBUG
 762:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_gpio_clr(NRK_MISO);
 763:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #endif
 764:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 			return NRK_ERROR; 
 765:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 			}
 766:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	 }
 767:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	  tdma_rx_buf_empty = 0;
 1870               	.LM219:
 1871 05f0 1092 0000 		sts tdma_rx_buf_empty,__zero_reg__
 768:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           nrk_event_signal (tdma_rx_pkt_signal);
 1873               	.LM220:
 1874 05f4 8091 0000 		lds r24,tdma_rx_pkt_signal
 1875 05f8 0E94 0000 		call nrk_event_signal
 1876 05fc 00C0      		rjmp .L87
 1877               	.L83:
 756:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	  if(tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-1]!= 0xCA ||
 1879               	.LM221:
 1880 05fe 8091 0000 		lds r24,tdma_rfRxInfo+5
 1881 0602 9091 0000 		lds r25,tdma_rfRxInfo+5+1
 1882 0606 0E94 0000 		call aes_decrypt
 757:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-2]!= 0xFE ||
 1884               	.LM222:
 1885 060a 8091 0000 		lds r24,tdma_rfRxInfo+5
 1886 060e 9091 0000 		lds r25,tdma_rfRxInfo+5+1
 1887 0612 2091 0000 		lds r18,tdma_rfRxInfo+3
 1888 0616 820F      		add r24,r18
 1889 0618 911D      		adc r25,__zero_reg__
 1890 061a 27FD      		sbrc r18,7
 1891 061c 9A95      		dec r25
 1892 061e FC01      		movw r30,r24
 1893 0620 3197      		sbiw r30,1
 1894 0622 2081      		ld r18,Z
 1895 0624 2A3C      		cpi r18,lo8(-54)
 1896 0626 01F4      		brne .L84
 758:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-3]!= 0xBE ||
 1898               	.LM223:
 1899 0628 3197      		sbiw r30,1
 757:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-2]!= 0xFE ||
 1901               	.LM224:
 1902 062a 2081      		ld r18,Z
 1903 062c 2E3F      		cpi r18,lo8(-2)
 1904 062e 01F4      		brne .L84
 759:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-4]!= 0xEF ) {
 1906               	.LM225:
 1907 0630 3197      		sbiw r30,1
 758:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-3]!= 0xBE ||
 1909               	.LM226:
 1910 0632 2081      		ld r18,Z
 1911 0634 2E3B      		cpi r18,lo8(-66)
 1912 0636 01F4      		brne .L84
 760:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #ifdef GPIO_DEBUG
 1914               	.LM227:
 1915 0638 3197      		sbiw r30,1
 759:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	     tdma_rfRxInfo.pPayload[tdma_rfRxInfo.length-4]!= 0xEF ) {
 1917               	.LM228:
 1918 063a 8081      		ld r24,Z
 1919 063c 8F3E      		cpi r24,lo8(-17)
 1920 063e 01F0      		breq .L85
 1921 0640 00C0      		rjmp .L84
 1922               	.L82:
 769:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         }
 770:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         break;
 771:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       }
 772:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_spin_wait_us (100);
 1924               	.LM229:
 1925 0642 84E6      		ldi r24,lo8(100)
 1926 0644 90E0      		ldi r25,0
 1927 0646 0E94 0000 		call nrk_spin_wait_us
 1928 064a D150      		subi r29,lo8(-(-1))
 748:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   //    v = rf_polling_rx_packet ();
 1930               	.LM230:
 1931 064c 01F4      		brne .L80
 1932 064e 8C2F      		mov r24,r28
 1933 0650 00C0      		rjmp .L81
 1934               	.L87:
 750:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       if (v == 1) {
 1936               	.LM231:
 1937 0652 81E0      		ldi r24,lo8(1)
 1938               	.L81:
 1939               	/* epilogue start */
 773:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     }
 774:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 775:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** //  }
 776:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 777:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #ifdef GPIO_DEBUG
 778:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_gpio_clr(NRK_MISO);
 779:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #endif
 780:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return v;
 781:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 1941               	.LM232:
 1942 0654 DF91      		pop r29
 1943 0656 CF91      		pop r28
 1944 0658 0895      		ret
 1949               	.Lscope28:
 1951               		.stabd	78,0,0
 1953               	.global	_tdma_tx
 1955               	_tdma_tx:
 1956               		.stabd	46,0,0
 782:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 783:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 784:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** int8_t _tdma_tx ()
 785:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 1958               	.LM233:
 1959               	.LFBB29:
 1960 065a 0F93      		push r16
 1961 065c 1F93      		push r17
 1962 065e CF93      		push r28
 1963               	/* prologue: function */
 1964               	/* frame size = 0 */
 1965               	/* stack size = 3 */
 1966               	.L__stack_usage = 3
 786:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   int8_t v;
 787:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   uint8_t checksum, i;
 788:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   uint8_t *data_start, *frame_start = &TRXFBST;
 789:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****  
 790:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 791:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** if(_tdma_aes_enabled)
 1968               	.LM234:
 1969 0660 9091 0000 		lds r25,_tdma_aes_enabled
 1970 0664 9923      		tst r25
 1971 0666 01F4      		brne .+2
 1972 0668 00C0      		rjmp .L90
 792:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 793:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****    // Add 0xCAFEBEEF as a magic number for AES MAC
 794:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****    tdma_rfTxInfo.length=tdma_rfTxInfo.length+4;
 1974               	.LM235:
 1975 066a 2091 0000 		lds r18,tdma_rfTxInfo+2
 1976 066e 84E0      		ldi r24,lo8(4)
 1977 0670 820F      		add r24,r18
 795:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 796:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****    // Make packet a multiple of 16
 797:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****    if((tdma_rfTxInfo.length%16)!=0) tdma_rfTxInfo.length=((tdma_rfTxInfo.length/16)+1)*16;
 1979               	.LM236:
 1980 0672 382F      		mov r19,r24
 1981 0674 3F70      		andi r19,lo8(15)
 1982 0676 01F0      		breq .L103
 1984               	.LM237:
 1985 0678 87FF      		sbrs r24,7
 1986 067a 00C0      		rjmp .L93
 1987 067c 83E1      		ldi r24,lo8(19)
 1988 067e 820F      		add r24,r18
 1989               	.L93:
 1990 0680 807F      		andi r24,lo8(-16)
 1991 0682 805F      		subi r24,lo8(-(16))
 1992               	.L103:
 1993 0684 8093 0000 		sts tdma_rfTxInfo+2,r24
 798:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****    
 799:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** //   printf( "l2: %d\r\n",tdma_rfTxInfo.length );
 800:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****    tdma_rfTxInfo.pPayload[tdma_rfTxInfo.length-1]=0xCA;
 1995               	.LM238:
 1996 0688 8091 0000 		lds r24,tdma_rfTxInfo+2
 1997 068c E091 0000 		lds r30,tdma_rfTxInfo+3
 1998 0690 F091 0000 		lds r31,tdma_rfTxInfo+3+1
 1999 0694 E80F      		add r30,r24
 2000 0696 F11D      		adc r31,__zero_reg__
 2001 0698 87FD      		sbrc r24,7
 2002 069a FA95      		dec r31
 2003 069c 3197      		sbiw r30,1
 2004 069e 8AEC      		ldi r24,lo8(-54)
 2005 06a0 8083      		st Z,r24
 801:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****    tdma_rfTxInfo.pPayload[tdma_rfTxInfo.length-2]=0xFE;
 2007               	.LM239:
 2008 06a2 8091 0000 		lds r24,tdma_rfTxInfo+2
 2009 06a6 E091 0000 		lds r30,tdma_rfTxInfo+3
 2010 06aa F091 0000 		lds r31,tdma_rfTxInfo+3+1
 2011 06ae E80F      		add r30,r24
 2012 06b0 F11D      		adc r31,__zero_reg__
 2013 06b2 87FD      		sbrc r24,7
 2014 06b4 FA95      		dec r31
 2015 06b6 3297      		sbiw r30,2
 2016 06b8 8EEF      		ldi r24,lo8(-2)
 2017 06ba 8083      		st Z,r24
 802:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****    tdma_rfTxInfo.pPayload[tdma_rfTxInfo.length-3]=0xBE;
 2019               	.LM240:
 2020 06bc 8091 0000 		lds r24,tdma_rfTxInfo+2
 2021 06c0 E091 0000 		lds r30,tdma_rfTxInfo+3
 2022 06c4 F091 0000 		lds r31,tdma_rfTxInfo+3+1
 2023 06c8 E80F      		add r30,r24
 2024 06ca F11D      		adc r31,__zero_reg__
 2025 06cc 87FD      		sbrc r24,7
 2026 06ce FA95      		dec r31
 2027 06d0 3397      		sbiw r30,3
 2028 06d2 8EEB      		ldi r24,lo8(-66)
 2029 06d4 8083      		st Z,r24
 803:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****    tdma_rfTxInfo.pPayload[tdma_rfTxInfo.length-4]=0xEF;
 2031               	.LM241:
 2032 06d6 8091 0000 		lds r24,tdma_rfTxInfo+2
 2033 06da E091 0000 		lds r30,tdma_rfTxInfo+3
 2034 06de F091 0000 		lds r31,tdma_rfTxInfo+3+1
 2035 06e2 E80F      		add r30,r24
 2036 06e4 F11D      		adc r31,__zero_reg__
 2037 06e6 87FD      		sbrc r24,7
 2038 06e8 FA95      		dec r31
 2039 06ea 3497      		sbiw r30,4
 2040 06ec 8FEE      		ldi r24,lo8(-17)
 2041 06ee 8083      		st Z,r24
 2042               	.L90:
 804:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 805:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   checksum=0;
 806:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   for(i=0; i<tdma_rfTxInfo.length; i++ )
 2044               	.LM242:
 2045 06f0 6091 0000 		lds r22,tdma_rfTxInfo+2
 2046 06f4 062F      		mov r16,r22
 2047 06f6 1127      		clr r17
 2048 06f8 07FD      		sbrc r16,7
 2049 06fa 1095      		com r17
 807:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	checksum+=tdma_rfTxInfo.pPayload[i];
 2051               	.LM243:
 2052 06fc E091 0000 		lds r30,tdma_rfTxInfo+3
 2053 0700 F091 0000 		lds r31,tdma_rfTxInfo+3+1
 2054 0704 C0E0      		ldi r28,0
 2055 0706 40E0      		ldi r20,0
 2056               	.L94:
 806:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	checksum+=tdma_rfTxInfo.pPayload[i];
 2058               	.LM244:
 2059 0708 242F      		mov r18,r20
 2060 070a 30E0      		ldi r19,0
 2061 070c 2017      		cp r18,r16
 2062 070e 3107      		cpc r19,r17
 2063 0710 04F4      		brge .L104
 2065               	.LM245:
 2066 0712 2E0F      		add r18,r30
 2067 0714 3F1F      		adc r19,r31
 2068 0716 D901      		movw r26,r18
 2069 0718 8C91      		ld r24,X
 2070 071a C80F      		add r28,r24
 806:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	checksum+=tdma_rfTxInfo.pPayload[i];
 2072               	.LM246:
 2073 071c 4F5F      		subi r20,lo8(-(1))
 2074 071e 00C0      		rjmp .L94
 2075               	.L104:
 808:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 809:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** if(_tdma_aes_enabled)   aes_encrypt(tdma_rfTxInfo.pPayload, tdma_rfTxInfo.length );
 2077               	.LM247:
 2078 0720 9923      		tst r25
 2079 0722 01F0      		breq .L96
 2081               	.LM248:
 2082 0724 CF01      		movw r24,r30
 2083 0726 0E94 0000 		call aes_encrypt
 2084               	.L96:
 810:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   
 811:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 812:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   data_start = frame_start + 9 + 1 + tdma_rfTxInfo.length;
 2086               	.LM249:
 2087 072a E091 0000 		lds r30,tdma_rfTxInfo+2
 2088 072e FF27      		clr r31
 2089 0730 E7FD      		sbrc r30,7
 2090 0732 F095      		com r31
 813:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   memcpy(data_start, &checksum, sizeof(uint8_t));
 2092               	.LM250:
 2093 0734 E657      		subi r30,118
 2094 0736 FE4F      		sbci r31,-2
 2095 0738 C083      		st Z,r28
 814:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 815:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #ifdef GPIO_DEBUG
 816:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_gpio_set(NRK_MOSI);
 817:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #endif
 818:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 819:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** for(i=0; i<TX_PKT_RETRY; i++ )
 820:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 821:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   v = rf_tx_packet (&tdma_rfTxInfo);
 2097               	.LM251:
 2098 073a 80E0      		ldi r24,lo8(tdma_rfTxInfo)
 2099 073c 90E0      		ldi r25,hi8(tdma_rfTxInfo)
 2100 073e 0E94 0000 		call rf_tx_packet
 822:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   // Too delay or not?
 823:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 824:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 825:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tx_data_ready = 0;
 2102               	.LM252:
 2103 0742 1092 0000 		sts tx_data_ready,__zero_reg__
 826:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   nrk_event_signal (tdma_tx_pkt_done_signal);
 2105               	.LM253:
 2106 0746 8091 0000 		lds r24,tdma_tx_pkt_done_signal
 2107 074a 0E94 0000 		call nrk_event_signal
 827:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #ifdef GPIO_DEBUG
 828:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_gpio_clr(NRK_MOSI);
 829:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   #endif
 830:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   return NRK_OK;
 831:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 2109               	.LM254:
 2110 074e 81E0      		ldi r24,lo8(1)
 2111               	/* epilogue start */
 2112 0750 CF91      		pop r28
 2113 0752 1F91      		pop r17
 2114 0754 0F91      		pop r16
 2115 0756 0895      		ret
 2121               	.Lscope29:
 2123               		.stabd	78,0,0
 2125               	.global	tdma_nw_task
 2127               	tdma_nw_task:
 2128               		.stabd	46,0,0
 453:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   int8_t v, i;
 2130               	.LM255:
 2131               	.LFBB30:
 2132 0758 CF93      		push r28
 2133 075a DF93      		push r29
 2134 075c 00D0      		rcall .
 2135 075e CDB7      		in r28,__SP_L__
 2136 0760 DEB7      		in r29,__SP_H__
 2137               	/* prologue: function */
 2138               	/* frame size = 2 */
 2139               	/* stack size = 4 */
 2140               	.L__stack_usage = 4
 2141               	.L106:
 459:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   } while (!tdma_started ());
 2143               	.LM256:
 2144 0762 0E94 0000 		call nrk_wait_until_next_period
 2145               	.LBB18:
 2146               	.LBB19:
 679:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** }
 2148               	.LM257:
 2149 0766 8091 0000 		lds r24,tdma_running
 2150               	.LBE19:
 2151               	.LBE18:
 460:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 2153               	.LM258:
 2154 076a 8823      		tst r24
 2155 076c 01F0      		breq .L106
 463:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   if (v == NRK_ERROR)
 2157               	.LM259:
 2158 076e 8091 0000 		lds r24,tdma_enable_signal
 2159 0772 0E94 0000 		call nrk_signal_register
 2160 0776 8A83      		std Y+2,r24
 464:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     nrk_kprintf (PSTR ("Failed to register signal\r\n"));
 2162               	.LM260:
 2163 0778 8F3F      		cpi r24,lo8(-1)
 2164 077a 01F4      		brne .L107
 465:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   slot = 0;
 2166               	.LM261:
 2167 077c 80E0      		ldi r24,lo8(__c.3773)
 2168 077e 90E0      		ldi r25,hi8(__c.3773)
 2169 0780 0E94 0000 		call nrk_kprintf
 2170               	.L107:
 538:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	}
 2172               	.LM262:
 2173 0784 612C      		mov r6,__zero_reg__
 2174 0786 712C      		mov r7,__zero_reg__
 648:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.ackRequest = 0;
 2176               	.LM263:
 2177 0788 2224      		clr r2
 2178 078a 2A94      		dec r2
 2179 078c 322C      		mov r3,r2
 2180               	.L108:
 472:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	    sync_status=1; // HOST is always synced
 2182               	.LM264:
 2183 078e 8091 0000 		lds r24,tdma_mode
 2184 0792 8130      		cpi r24,lo8(1)
 2185 0794 01F0      		breq .+2
 2186 0796 00C0      		rjmp .L109
 473:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       // This is the downstream transmit slot
 2188               	.LM265:
 2189 0798 8093 0000 		sts sync_status,r24
 475:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 2191               	.LM266:
 2192 079c 6114      		cp r6,__zero_reg__
 2193 079e 7104      		cpc r7,__zero_reg__
 2194 07a0 01F0      		breq .+2
 2195 07a2 00C0      		rjmp .L110
 480:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.pPayload = tdma_tx_buf;
 2197               	.LM267:
 2198 07a4 8091 0000 		lds r24,tx_data_ready
 2199 07a8 8111      		cpse r24,__zero_reg__
 2200 07aa 00C0      		rjmp .L111
 481:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           // Setup the header data
 2202               	.LM268:
 2203 07ac 20E0      		ldi r18,lo8(tdma_tx_buf)
 2204 07ae 30E0      		ldi r19,hi8(tdma_tx_buf)
 2205 07b0 3093 0000 		sts tdma_rfTxInfo+3+1,r19
 2206 07b4 2093 0000 		sts tdma_rfTxInfo+3,r18
 483:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.pPayload[TDMA_DST_HIGH] = 0xff;
 2208               	.LM269:
 2209 07b8 3FEF      		ldi r19,lo8(-1)
 2210 07ba 3093 0000 		sts tdma_tx_buf+2,r19
 484:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.pPayload[TDMA_SRC_LOW] = 0x00;  // src
 2212               	.LM270:
 2213 07be 3093 0000 		sts tdma_tx_buf+3,r19
 485:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.pPayload[TDMA_SRC_HIGH] = 0x00;
 2215               	.LM271:
 2216 07c2 1092 0000 		sts tdma_tx_buf+4,__zero_reg__
 486:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.pPayload[TDMA_SEQ_NUM_LOW] = 0x00;      // seq num
 2218               	.LM272:
 2219 07c6 1092 0000 		sts tdma_tx_buf+5,__zero_reg__
 487:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.pPayload[TDMA_SEQ_NUM_HIGH] = 0x00;
 2221               	.LM273:
 2222 07ca 1092 0000 		sts tdma_tx_buf+6,__zero_reg__
 488:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_rfTxInfo.length = TDMA_PCF_HEADER;
 2224               	.LM274:
 2225 07ce 1092 0000 		sts tdma_tx_buf+7,__zero_reg__
 489:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         }
 2227               	.LM275:
 2228 07d2 8CE0      		ldi r24,lo8(12)
 2229 07d4 8093 0000 		sts tdma_rfTxInfo+2,r24
 2230               	.L111:
 491:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_CYCLE_SIZE_HIGH] =
 2232               	.LM276:
 2233 07d8 E091 0000 		lds r30,tdma_rfTxInfo+3
 2234 07dc F091 0000 		lds r31,tdma_rfTxInfo+3+1
 2235 07e0 9091 0000 		lds r25,tdma_slots_per_cycle
 2236 07e4 8091 0000 		lds r24,tdma_slots_per_cycle+1
 2237 07e8 9087      		std Z+8,r25
 492:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_slots_per_cycle >> 8;
 2239               	.LM277:
 2240 07ea 8187      		std Z+9,r24
 494:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_SLOT_HIGH] = 0;
 2242               	.LM278:
 2243 07ec 1082      		st Z,__zero_reg__
 495:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_TTL] = tdma_ttl<<4 | (tdma_ttl);
 2245               	.LM279:
 2246 07ee E091 0000 		lds r30,tdma_rfTxInfo+3
 2247 07f2 F091 0000 		lds r31,tdma_rfTxInfo+3+1
 2248 07f6 1182      		std Z+1,__zero_reg__
 496:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_SLOT_SIZE] = tdma_slot_len_ms;
 2250               	.LM280:
 2251 07f8 E091 0000 		lds r30,tdma_rfTxInfo+3
 2252 07fc F091 0000 		lds r31,tdma_rfTxInfo+3+1
 2253 0800 2091 0000 		lds r18,tdma_ttl
 2254 0804 30E1      		ldi r19,lo8(16)
 2255 0806 239F      		mul r18,r19
 2256 0808 C001      		movw r24,r0
 2257 080a 1124      		clr __zero_reg__
 2258 080c 822B      		or r24,r18
 2259 080e 8287      		std Z+10,r24
 497:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_get (&_tdma_next_wakeup);
 2261               	.LM281:
 2262 0810 8091 0000 		lds r24,tdma_slot_len_ms
 2263 0814 8387      		std Z+11,r24
 498:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.destAddr = 0xffff;
 2265               	.LM282:
 2266 0816 80E0      		ldi r24,lo8(_tdma_next_wakeup)
 2267 0818 90E0      		ldi r25,hi8(_tdma_next_wakeup)
 2268 081a 0E94 0000 		call nrk_time_get
 499:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.ackRequest = 0;
 2270               	.LM283:
 2271 081e 3092 0000 		sts tdma_rfTxInfo+1,r3
 2272 0822 2092 0000 		sts tdma_rfTxInfo,r2
 500:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.cca = 0;
 2274               	.LM284:
 2275 0826 1092 0000 		sts tdma_rfTxInfo+6,__zero_reg__
 501:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         _tdma_tx ();
 2277               	.LM285:
 2278 082a 1092 0000 		sts tdma_rfTxInfo+5,__zero_reg__
 502:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         rf_rx_on ();
 2280               	.LM286:
 2281 082e 0E94 0000 		call _tdma_tx
 503:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	if(tdma_wakeup_flag==1)
 2283               	.LM287:
 2284 0832 0E94 0000 		call rf_rx_on
 504:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		{
 2286               	.LM288:
 2287 0836 8091 0000 		lds r24,tdma_wakeup_flag
 2288 083a 8130      		cpi r24,lo8(1)
 2289 083c 01F0      		breq .+2
 2290 083e 00C0      		rjmp .L112
 2291 0840 412C      		mov r4,__zero_reg__
 2292 0842 512C      		mov r5,__zero_reg__
 2293               	.L114:
 508:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         			tdma_rfTxInfo.pPayload[TDMA_SLOT_LOW] = 0xff;      // slot
 2295               	.LM289:
 2296 0844 C201      		movw r24,r4
 2297 0846 65E0      		ldi r22,lo8(5)
 2298 0848 70E0      		ldi r23,0
 2299 084a 0E94 0000 		call __udivmodhi4
 2300 084e 892B      		or r24,r25
 2301 0850 01F4      		brne .L113
 508:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         			tdma_rfTxInfo.pPayload[TDMA_SLOT_LOW] = 0xff;      // slot
 2303               	.LM290:
 2304 0852 83E0      		ldi r24,lo8(3)
 2305 0854 90E0      		ldi r25,0
 2306 0856 0E94 0000 		call nrk_led_toggle
 2307               	.L113:
 509:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         			tdma_rfTxInfo.pPayload[TDMA_SLOT_HIGH] = 0xff;
 2309               	.LM291:
 2310 085a E091 0000 		lds r30,tdma_rfTxInfo+3
 2311 085e F091 0000 		lds r31,tdma_rfTxInfo+3+1
 2312 0862 8FEF      		ldi r24,lo8(-1)
 2313 0864 8083      		st Z,r24
 510:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           			tdma_rfTxInfo.pPayload[TDMA_SRC_LOW] = 0x0;  // src
 2315               	.LM292:
 2316 0866 E091 0000 		lds r30,tdma_rfTxInfo+3
 2317 086a F091 0000 		lds r31,tdma_rfTxInfo+3+1
 2318 086e 8183      		std Z+1,r24
 511:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           			tdma_rfTxInfo.pPayload[TDMA_SRC_HIGH] = 0x0;
 2320               	.LM293:
 2321 0870 E091 0000 		lds r30,tdma_rfTxInfo+3
 2322 0874 F091 0000 		lds r31,tdma_rfTxInfo+3+1
 2323 0878 1482      		std Z+4,__zero_reg__
 512:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           			tdma_rfTxInfo.length = TDMA_PCF_HEADER;
 2325               	.LM294:
 2326 087a E091 0000 		lds r30,tdma_rfTxInfo+3
 2327 087e F091 0000 		lds r31,tdma_rfTxInfo+3+1
 2328 0882 1582      		std Z+5,__zero_reg__
 513:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         			_tdma_tx ();
 2330               	.LM295:
 2331 0884 9CE0      		ldi r25,lo8(12)
 2332 0886 9093 0000 		sts tdma_rfTxInfo+2,r25
 514:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         			//rf_rx_on ();
 2334               	.LM296:
 2335 088a 0E94 0000 		call _tdma_tx
 516:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 			}
 2337               	.LM297:
 2338 088e 8AE0      		ldi r24,lo8(10)
 2339 0890 90E0      		ldi r25,0
 2340 0892 0E94 0000 		call nrk_wait_until_ticks
 506:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 			{
 2342               	.LM298:
 2343 0896 EFEF      		ldi r30,-1
 2344 0898 4E1A      		sub r4,r30
 2345 089a 5E0A      		sbc r5,r30
 2346 089c F8EE      		ldi r31,-24
 2347 089e 4F16      		cp r4,r31
 2348 08a0 F3E0      		ldi r31,3
 2349 08a2 5F06      		cpc r5,r31
 2350 08a4 01F4      		brne .L114
 518:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		slot=0;
 2352               	.LM299:
 2353 08a6 83E0      		ldi r24,lo8(3)
 2354 08a8 90E0      		ldi r25,0
 2355 08aa 0E94 0000 		call nrk_led_clr
 520:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		}
 2357               	.LM300:
 2358 08ae 1092 0000 		sts tdma_wakeup_flag,__zero_reg__
 2359 08b2 00C0      		rjmp .L112
 2360               	.L110:
 529:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         if (v == 1)
 2362               	.LM301:
 2363 08b4 0E94 0000 		call _tdma_rx_master
 530:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           tdma_last_tx_slot = slot;
 2365               	.LM302:
 2366 08b8 2A81      		ldd r18,Y+2
 2367 08ba 2130      		cpi r18,lo8(1)
 2368 08bc 01F4      		brne .L112
 531:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       }
 2370               	.LM303:
 2371 08be 7092 0000 		sts tdma_last_tx_slot+1,r7
 2372 08c2 6092 0000 		sts tdma_last_tx_slot,r6
 2373               	.L112:
 533:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	// For the last slot, we wakeup a bit late to make sure all other nodes have woken up in time to
 2375               	.LM304:
 2376 08c6 3FEF      		ldi r19,-1
 2377 08c8 631A      		sub r6,r19
 2378 08ca 730A      		sbc r7,r19
 536:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_wait_until_ticks(TDMA_WAKEUP_GAURD_TIME_MS);
 2380               	.LM305:
 2381 08cc 8091 0000 		lds r24,tdma_slots_per_cycle
 2382 08d0 9091 0000 		lds r25,tdma_slots_per_cycle+1
 2383 08d4 8615      		cp r24,r6
 2384 08d6 9705      		cpc r25,r7
 2385 08d8 00F4      		brsh .L115
 537:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	slot = 0;
 2387               	.LM306:
 2388 08da 8AE0      		ldi r24,lo8(10)
 2389 08dc 90E0      		ldi r25,0
 2390 08de 0E94 0000 		call nrk_wait_until_ticks
 2391 08e2 00C0      		rjmp .L148
 2392               	.L115:
 541:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_time_compact_nanos (&_tdma_next_wakeup);
 2394               	.LM307:
 2395 08e4 8090 0000 		lds r8,_tdma_slot_time
 2396 08e8 9090 0000 		lds r9,_tdma_slot_time+1
 2397 08ec A090 0000 		lds r10,_tdma_slot_time+2
 2398 08f0 B090 0000 		lds r11,_tdma_slot_time+3
 2399 08f4 C090 0000 		lds r12,_tdma_slot_time+4
 2400 08f8 D090 0000 		lds r13,_tdma_slot_time+5
 2401 08fc E090 0000 		lds r14,_tdma_slot_time+6
 2402 0900 F090 0000 		lds r15,_tdma_slot_time+7
 2403 0904 0091 0000 		lds r16,_tdma_next_wakeup
 2404 0908 1091 0000 		lds r17,_tdma_next_wakeup+1
 2405 090c 2091 0000 		lds r18,_tdma_next_wakeup+2
 2406 0910 3091 0000 		lds r19,_tdma_next_wakeup+3
 2407 0914 4091 0000 		lds r20,_tdma_next_wakeup+4
 2408 0918 5091 0000 		lds r21,_tdma_next_wakeup+5
 2409 091c 6091 0000 		lds r22,_tdma_next_wakeup+6
 2410 0920 7091 0000 		lds r23,_tdma_next_wakeup+7
 2411 0924 80E0      		ldi r24,lo8(_tdma_next_wakeup)
 2412 0926 90E0      		ldi r25,hi8(_tdma_next_wakeup)
 2413 0928 0E94 0000 		call nrk_time_add
 542:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_wait_until (_tdma_next_wakeup);
 2415               	.LM308:
 2416 092c 80E0      		ldi r24,lo8(_tdma_next_wakeup)
 2417 092e 90E0      		ldi r25,hi8(_tdma_next_wakeup)
 2418 0930 0E94 0000 		call nrk_time_compact_nanos
 543:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	
 2420               	.LM309:
 2421 0934 2091 0000 		lds r18,_tdma_next_wakeup
 2422 0938 3091 0000 		lds r19,_tdma_next_wakeup+1
 2423 093c 4091 0000 		lds r20,_tdma_next_wakeup+2
 2424 0940 5091 0000 		lds r21,_tdma_next_wakeup+3
 2425 0944 6091 0000 		lds r22,_tdma_next_wakeup+4
 2426 0948 7091 0000 		lds r23,_tdma_next_wakeup+5
 2427 094c 8091 0000 		lds r24,_tdma_next_wakeup+6
 2428 0950 9091 0000 		lds r25,_tdma_next_wakeup+7
 2429 0954 0E94 0000 		call nrk_wait_until
 2430 0958 00C0      		rjmp .L108
 2431               	.L109:
 549:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 2433               	.LM310:
 2434 095a 6728      		or r6,r7
 2435 095c 01F0      		breq .+2
 2436 095e 00C0      		rjmp .L117
 555:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	rf_rx_on ();
 2438               	.LM311:
 2439 0960 0E94 0000 		call rf_power_up
 556:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         do {
 2441               	.LM312:
 2442 0964 0E94 0000 		call rf_rx_on
 554:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	rf_power_up();
 2444               	.LM313:
 2445 0968 612C      		mov r6,__zero_reg__
 2446 096a 712C      		mov r7,__zero_reg__
 2447               	.L126:
 558:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           nrk_time_get (&_tdma_next_wakeup);
 2449               	.LM314:
 2450 096c 0E94 0000 		call _tdma_rx
 2451 0970 8A83      		std Y+2,r24
 559:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****           if (v == NRK_OK) {
 2453               	.LM315:
 2454 0972 80E0      		ldi r24,lo8(_tdma_next_wakeup)
 2455 0974 90E0      		ldi r25,hi8(_tdma_next_wakeup)
 2456 0976 0E94 0000 		call nrk_time_get
 560:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 2458               	.LM316:
 2459 097a 8A81      		ldd r24,Y+2
 2460 097c 8130      		cpi r24,lo8(1)
 2461 097e 01F4      		brne .L118
 564:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****               pPayload[TDMA_SRC_LOW];
 2463               	.LM317:
 2464 0980 E091 0000 		lds r30,tdma_rfRxInfo+5
 2465 0984 F091 0000 		lds r31,tdma_rfRxInfo+5+1
 568:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****               pPayload[TDMA_SLOT_LOW];
 2467               	.LM318:
 2468 0988 8181      		ldd r24,Z+1
 2469 098a 90E0      		ldi r25,0
 2470 098c 982F      		mov r25,r24
 2471 098e 8827      		clr r24
 2472 0990 2081      		ld r18,Z
 2473 0992 822B      		or r24,r18
 564:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****               pPayload[TDMA_SRC_LOW];
 2475               	.LM319:
 2476 0994 2581      		ldd r18,Z+5
 2477 0996 30E0      		ldi r19,0
 2478 0998 322F      		mov r19,r18
 2479 099a 2227      		clr r18
 2480 099c 4481      		ldd r20,Z+4
 2481 099e 242B      		or r18,r20
 571:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 2483               	.LM320:
 2484 09a0 232B      		or r18,r19
 2485 09a2 01F4      		brne .L119
 571:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 2487               	.LM321:
 2488 09a4 8F3F      		cpi r24,-1
 2489 09a6 2FEF      		ldi r18,-1
 2490 09a8 9207      		cpc r25,r18
 2491 09aa 01F0      		breq .L140
 2492               	.L119:
 573:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****               v = NRK_ERROR;
 2494               	.LM322:
 2495 09ac 892B      		or r24,r25
 2496 09ae 01F4      		brne .+2
 2497 09b0 00C0      		rjmp .L121
 2498 09b2 00C0      		rjmp .L120
 2499               	.L140:
 571:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 2501               	.LM323:
 2502 09b4 612C      		mov r6,__zero_reg__
 2503 09b6 712C      		mov r7,__zero_reg__
 2504               	.L120:
 575:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	      // agr remove next 3 lines?
 2506               	.LM324:
 2507 09b8 31E0      		ldi r19,lo8(1)
 2508 09ba 3093 0000 		sts tdma_rx_buf_empty,r19
 2509 09be 8FEF      		ldi r24,lo8(-1)
 2510 09c0 8A83      		std Y+2,r24
 2511               	.L118:
 596:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		  		sync_status=0; /*nrk_led_set(RED_LED);*/ 
 2513               	.LM325:
 2514 09c2 94E6      		ldi r25,100
 2515 09c4 6916      		cp r6,r25
 2516 09c6 7104      		cpc r7,__zero_reg__
 2517 09c8 00F0      		brlo .L139
 597:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 				//sync=30000; 
 2519               	.LM326:
 2520 09ca 1092 0000 		sts sync_status,__zero_reg__
 599:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		if(i==NRK_OK) { tdma_rx_buf_empty=1; /*nrk_kprintf( PSTR("sync=0\r\n"));*/ sync=0; }
 2522               	.LM327:
 2523 09ce E091 0000 		lds r30,tdma_error_callback
 2524 09d2 F091 0000 		lds r31,tdma_error_callback+1
 2525 09d6 3097      		sbiw r30,0
 2526 09d8 01F0      		breq .L123
 599:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		if(i==NRK_OK) { tdma_rx_buf_empty=1; /*nrk_kprintf( PSTR("sync=0\r\n"));*/ sync=0; }
 2528               	.LM328:
 2529 09da C301      		movw r24,r6
 2530 09dc 8456      		subi r24,100
 2531 09de 9109      		sbc r25,__zero_reg__
 2532 09e0 0995      		icall
 2533 09e2 8983      		std Y+1,r24
 2534               	.L123:
 600:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	  } 
 2536               	.LM329:
 2537 09e4 E981      		ldd r30,Y+1
 2538 09e6 E130      		cpi r30,lo8(1)
 2539 09e8 01F4      		brne .L124
 600:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	  } 
 2541               	.LM330:
 2542 09ea 612C      		mov r6,__zero_reg__
 2543 09ec 712C      		mov r7,__zero_reg__
 2544 09ee 00C0      		rjmp .L139
 2545               	.L124:
 602:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	tdma_rx_pkt_release();
 2547               	.LM331:
 2548 09f0 F0E3      		ldi r31,48
 2549 09f2 6F16      		cp r6,r31
 2550 09f4 F5E7      		ldi r31,117
 2551 09f6 7F06      		cpc r7,r31
 2552 09f8 00F4      		brsh .L125
 2553               	.L139:
 602:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	tdma_rx_pkt_release();
 2555               	.LM332:
 2556 09fa 2FEF      		ldi r18,-1
 2557 09fc 621A      		sub r6,r18
 2558 09fe 720A      		sbc r7,r18
 2559               	.L125:
 2560               	.LBB20:
 2561               	.LBB21:
 433:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** return NRK_OK;
 2563               	.LM333:
 2564 0a00 31E0      		ldi r19,lo8(1)
 2565 0a02 3093 0000 		sts tdma_rx_buf_empty,r19
 2566               	.LBE21:
 2567               	.LBE20:
 604:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       //if(sync==30000)  sync_status=1; /*nrk_led_clr(RED_LED);*/ 
 2569               	.LM334:
 2570 0a06 8A81      		ldd r24,Y+2
 2571 0a08 8130      		cpi r24,lo8(1)
 2572 0a0a 01F0      		breq .+2
 2573 0a0c 00C0      		rjmp .L126
 2574               	.L117:
 609:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       if(ttl_delay>16) ttl_delay=0;
 2576               	.LM335:
 2577 0a0e E091 0000 		lds r30,tdma_rfRxInfo+5
 2578 0a12 F091 0000 		lds r31,tdma_rfRxInfo+5+1
 2579 0a16 9285      		ldd r25,Z+10
 2580 0a18 892F      		mov r24,r25
 2581 0a1a 8295      		swap r24
 2582 0a1c 8F70      		andi r24,lo8(15)
 2583 0a1e 9F70      		andi r25,lo8(15)
 2584 0a20 891B      		sub r24,r25
 610:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       _ttl_delay_total.secs=0;
 2586               	.LM336:
 2587 0a22 8131      		cpi r24,lo8(17)
 2588 0a24 00F4      		brsh .L127
 609:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       if(ttl_delay>16) ttl_delay=0;
 2590               	.LM337:
 2591 0a26 8093 0000 		sts ttl_delay,r24
 2592 0a2a 00C0      		rjmp .L128
 2593               	.L127:
 610:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       _ttl_delay_total.secs=0;
 2595               	.LM338:
 2596 0a2c 1092 0000 		sts ttl_delay,__zero_reg__
 2597               	.L128:
 611:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       _ttl_delay_total.nano_secs=0;
 2599               	.LM339:
 2600 0a30 1092 0000 		sts _ttl_delay_total,__zero_reg__
 2601 0a34 1092 0000 		sts _ttl_delay_total+1,__zero_reg__
 2602 0a38 1092 0000 		sts _ttl_delay_total+2,__zero_reg__
 2603 0a3c 1092 0000 		sts _ttl_delay_total+3,__zero_reg__
 612:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       _ttl_delay_per_tx.secs=0;
 2605               	.LM340:
 2606 0a40 1092 0000 		sts _ttl_delay_total+4,__zero_reg__
 2607 0a44 1092 0000 		sts _ttl_delay_total+4+1,__zero_reg__
 2608 0a48 1092 0000 		sts _ttl_delay_total+4+2,__zero_reg__
 2609 0a4c 1092 0000 		sts _ttl_delay_total+4+3,__zero_reg__
 613:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       _ttl_delay_per_tx.nano_secs=0;
 2611               	.LM341:
 2612 0a50 1092 0000 		sts _ttl_delay_per_tx,__zero_reg__
 2613 0a54 1092 0000 		sts _ttl_delay_per_tx+1,__zero_reg__
 2614 0a58 1092 0000 		sts _ttl_delay_per_tx+2,__zero_reg__
 2615 0a5c 1092 0000 		sts _ttl_delay_per_tx+3,__zero_reg__
 617:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 2617               	.LM342:
 2618 0a60 A091 0000 		lds r26,tdma_rfRxInfo+3
 2619 0a64 BB27      		clr r27
 2620 0a66 A7FD      		sbrc r26,7
 2621 0a68 B095      		com r27
 2622 0a6a 20E0      		ldi r18,0
 2623 0a6c 3DE7      		ldi r19,lo8(125)
 2624 0a6e 0E94 0000 		call __usmulhisi3
 2625 0a72 DC01      		movw r26,r24
 2626 0a74 CB01      		movw r24,r22
 2627 0a76 935B      		subi r25,-77
 2628 0a78 A74F      		sbci r26,-9
 2629 0a7a BF4F      		sbci r27,-1
 2630 0a7c 8093 0000 		sts _ttl_delay_per_tx+4,r24
 2631 0a80 9093 0000 		sts _ttl_delay_per_tx+4+1,r25
 2632 0a84 A093 0000 		sts _ttl_delay_per_tx+4+2,r26
 2633 0a88 B093 0000 		sts _ttl_delay_per_tx+4+3,r27
 619:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_add (&_ttl_delay_total, _ttl_delay_total, _ttl_delay_per_tx);
 2635               	.LM343:
 2636 0a8c 612C      		mov r6,__zero_reg__
 2637 0a8e 712C      		mov r7,__zero_reg__
 2638               	.L129:
 619:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_add (&_ttl_delay_total, _ttl_delay_total, _ttl_delay_per_tx);
 2640               	.LM344:
 2641 0a90 8091 0000 		lds r24,ttl_delay
 2642 0a94 90E0      		ldi r25,0
 2643 0a96 6816      		cp r6,r24
 2644 0a98 7906      		cpc r7,r25
 2645 0a9a 00F4      		brsh .L149
 620:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 2647               	.LM345:
 2648 0a9c 8090 0000 		lds r8,_ttl_delay_per_tx
 2649 0aa0 9090 0000 		lds r9,_ttl_delay_per_tx+1
 2650 0aa4 A090 0000 		lds r10,_ttl_delay_per_tx+2
 2651 0aa8 B090 0000 		lds r11,_ttl_delay_per_tx+3
 2652 0aac C090 0000 		lds r12,_ttl_delay_per_tx+4
 2653 0ab0 D090 0000 		lds r13,_ttl_delay_per_tx+5
 2654 0ab4 E090 0000 		lds r14,_ttl_delay_per_tx+6
 2655 0ab8 F090 0000 		lds r15,_ttl_delay_per_tx+7
 2656 0abc 0091 0000 		lds r16,_ttl_delay_total
 2657 0ac0 1091 0000 		lds r17,_ttl_delay_total+1
 2658 0ac4 2091 0000 		lds r18,_ttl_delay_total+2
 2659 0ac8 3091 0000 		lds r19,_ttl_delay_total+3
 2660 0acc 4091 0000 		lds r20,_ttl_delay_total+4
 2661 0ad0 5091 0000 		lds r21,_ttl_delay_total+5
 2662 0ad4 6091 0000 		lds r22,_ttl_delay_total+6
 2663 0ad8 7091 0000 		lds r23,_ttl_delay_total+7
 2664 0adc 80E0      		ldi r24,lo8(_ttl_delay_total)
 2665 0ade 90E0      		ldi r25,hi8(_ttl_delay_total)
 2666 0ae0 0E94 0000 		call nrk_time_add
 619:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_add (&_ttl_delay_total, _ttl_delay_total, _ttl_delay_per_tx);
 2668               	.LM346:
 2669 0ae4 9FEF      		ldi r25,-1
 2670 0ae6 691A      		sub r6,r25
 2671 0ae8 790A      		sbc r7,r25
 2672 0aea 00C0      		rjmp .L129
 2673               	.L149:
 623:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	rf_rx_off ();
 2675               	.LM347:
 2676 0aec E1E0      		ldi r30,lo8(1)
 2677 0aee E093 0000 		sts sync_status,r30
 624:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	rf_power_down();
 2679               	.LM348:
 2680 0af2 0E94 0000 		call rf_rx_off
 625:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 2682               	.LM349:
 2683 0af6 0E94 0000 		call rf_power_down
 628:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       if (slot > tdma_slots_per_cycle)
 2685               	.LM350:
 2686 0afa 8091 0000 		lds r24,tdma_tx_sched
 2687 0afe 9091 0000 		lds r25,tdma_tx_sched+1
 629:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         slot = tdma_slots_per_cycle;
 2689               	.LM351:
 2690 0b02 6090 0000 		lds r6,tdma_slots_per_cycle
 2691 0b06 7090 0000 		lds r7,tdma_slots_per_cycle+1
 2692 0b0a 8615      		cp r24,r6
 2693 0b0c 9705      		cpc r25,r7
 2694 0b0e 00F4      		brsh .L131
 2695 0b10 3C01      		movw r6,r24
 2696               	.L131:
 634:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_add (&_tdma_next_wakeup, _tdma_next_wakeup, _tdma_slot_time);
 2698               	.LM352:
 2699 0b12 412C      		mov r4,__zero_reg__
 2700 0b14 512C      		mov r5,__zero_reg__
 2701               	.L132:
 634:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_add (&_tdma_next_wakeup, _tdma_next_wakeup, _tdma_slot_time);
 2703               	.LM353:
 2704 0b16 4614      		cp r4,r6
 2705 0b18 5704      		cpc r5,r7
 2706 0b1a 01F0      		breq .L150
 635:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       // Subtract TTL delay time
 2708               	.LM354:
 2709 0b1c 8090 0000 		lds r8,_tdma_slot_time
 2710 0b20 9090 0000 		lds r9,_tdma_slot_time+1
 2711 0b24 A090 0000 		lds r10,_tdma_slot_time+2
 2712 0b28 B090 0000 		lds r11,_tdma_slot_time+3
 2713 0b2c C090 0000 		lds r12,_tdma_slot_time+4
 2714 0b30 D090 0000 		lds r13,_tdma_slot_time+5
 2715 0b34 E090 0000 		lds r14,_tdma_slot_time+6
 2716 0b38 F090 0000 		lds r15,_tdma_slot_time+7
 2717 0b3c 0091 0000 		lds r16,_tdma_next_wakeup
 2718 0b40 1091 0000 		lds r17,_tdma_next_wakeup+1
 2719 0b44 2091 0000 		lds r18,_tdma_next_wakeup+2
 2720 0b48 3091 0000 		lds r19,_tdma_next_wakeup+3
 2721 0b4c 4091 0000 		lds r20,_tdma_next_wakeup+4
 2722 0b50 5091 0000 		lds r21,_tdma_next_wakeup+5
 2723 0b54 6091 0000 		lds r22,_tdma_next_wakeup+6
 2724 0b58 7091 0000 		lds r23,_tdma_next_wakeup+7
 2725 0b5c 80E0      		ldi r24,lo8(_tdma_next_wakeup)
 2726 0b5e 90E0      		ldi r25,hi8(_tdma_next_wakeup)
 2727 0b60 0E94 0000 		call nrk_time_add
 634:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_add (&_tdma_next_wakeup, _tdma_next_wakeup, _tdma_slot_time);
 2729               	.LM355:
 2730 0b64 FFEF      		ldi r31,-1
 2731 0b66 4F1A      		sub r4,r31
 2732 0b68 5F0A      		sbc r5,r31
 2733 0b6a 00C0      		rjmp .L132
 2734               	.L150:
 637:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 2736               	.LM356:
 2737 0b6c 8090 0000 		lds r8,_ttl_delay_total
 2738 0b70 9090 0000 		lds r9,_ttl_delay_total+1
 2739 0b74 A090 0000 		lds r10,_ttl_delay_total+2
 2740 0b78 B090 0000 		lds r11,_ttl_delay_total+3
 2741 0b7c C090 0000 		lds r12,_ttl_delay_total+4
 2742 0b80 D090 0000 		lds r13,_ttl_delay_total+5
 2743 0b84 E090 0000 		lds r14,_ttl_delay_total+6
 2744 0b88 F090 0000 		lds r15,_ttl_delay_total+7
 2745 0b8c 0091 0000 		lds r16,_tdma_next_wakeup
 2746 0b90 1091 0000 		lds r17,_tdma_next_wakeup+1
 2747 0b94 2091 0000 		lds r18,_tdma_next_wakeup+2
 2748 0b98 3091 0000 		lds r19,_tdma_next_wakeup+3
 2749 0b9c 4091 0000 		lds r20,_tdma_next_wakeup+4
 2750 0ba0 5091 0000 		lds r21,_tdma_next_wakeup+5
 2751 0ba4 6091 0000 		lds r22,_tdma_next_wakeup+6
 2752 0ba8 7091 0000 		lds r23,_tdma_next_wakeup+7
 2753 0bac 80E0      		ldi r24,lo8(_tdma_next_wakeup)
 2754 0bae 90E0      		ldi r25,hi8(_tdma_next_wakeup)
 2755 0bb0 0E94 0000 		call nrk_time_sub
 639:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 2757               	.LM357:
 2758 0bb4 80E0      		ldi r24,lo8(_tdma_next_wakeup)
 2759 0bb6 90E0      		ldi r25,hi8(_tdma_next_wakeup)
 2760 0bb8 0E94 0000 		call nrk_time_compact_nanos
 642:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 2762               	.LM358:
 2763 0bbc 2091 0000 		lds r18,_tdma_next_wakeup
 2764 0bc0 3091 0000 		lds r19,_tdma_next_wakeup+1
 2765 0bc4 4091 0000 		lds r20,_tdma_next_wakeup+2
 2766 0bc8 5091 0000 		lds r21,_tdma_next_wakeup+3
 2767 0bcc 6091 0000 		lds r22,_tdma_next_wakeup+4
 2768 0bd0 7091 0000 		lds r23,_tdma_next_wakeup+5
 2769 0bd4 8091 0000 		lds r24,_tdma_next_wakeup+6
 2770 0bd8 9091 0000 		lds r25,_tdma_next_wakeup+7
 2771 0bdc 0E94 0000 		call nrk_wait_until
 645:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_SLOT_LOW] = slot & 0xff;    // slot
 2773               	.LM359:
 2774 0be0 8091 0000 		lds r24,tx_data_ready
 2775 0be4 8130      		cpi r24,lo8(1)
 2776 0be6 01F4      		brne .L134
 646:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.pPayload[TDMA_SLOT_HIGH] = slot >> 8;
 2778               	.LM360:
 2779 0be8 E091 0000 		lds r30,tdma_rfTxInfo+3
 2780 0bec F091 0000 		lds r31,tdma_rfTxInfo+3+1
 2781 0bf0 6082      		st Z,r6
 647:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.destAddr = 0xffff;
 2783               	.LM361:
 2784 0bf2 E091 0000 		lds r30,tdma_rfTxInfo+3
 2785 0bf6 F091 0000 		lds r31,tdma_rfTxInfo+3+1
 2786 0bfa 7182      		std Z+1,r7
 648:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.ackRequest = 0;
 2788               	.LM362:
 2789 0bfc 3092 0000 		sts tdma_rfTxInfo+1,r3
 2790 0c00 2092 0000 		sts tdma_rfTxInfo,r2
 649:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         tdma_rfTxInfo.cca = 0;
 2792               	.LM363:
 2793 0c04 1092 0000 		sts tdma_rfTxInfo+6,__zero_reg__
 650:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	rf_power_up();
 2795               	.LM364:
 2796 0c08 1092 0000 		sts tdma_rfTxInfo+5,__zero_reg__
 651:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         _tdma_tx ();
 2798               	.LM365:
 2799 0c0c 0E94 0000 		call rf_power_up
 652:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       }
 2801               	.LM366:
 2802 0c10 0E94 0000 		call _tdma_tx
 2803               	.L134:
 656:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	rf_power_down();
 2805               	.LM367:
 2806 0c14 0E94 0000 		call rf_rx_off
 657:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       for (tmp = 0; tmp < ((uint16_t)tdma_slots_per_cycle - (uint16_t)slot); tmp++)
 2808               	.LM368:
 2809 0c18 0E94 0000 		call rf_power_down
 658:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_add (&_tdma_next_wakeup, _tdma_next_wakeup, _tdma_slot_time);
 2811               	.LM369:
 2812 0c1c 412C      		mov r4,__zero_reg__
 2813 0c1e 512C      		mov r5,__zero_reg__
 2814               	.L135:
 658:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_add (&_tdma_next_wakeup, _tdma_next_wakeup, _tdma_slot_time);
 2816               	.LM370:
 2817 0c20 8091 0000 		lds r24,tdma_slots_per_cycle
 2818 0c24 9091 0000 		lds r25,tdma_slots_per_cycle+1
 2819 0c28 8619      		sub r24,r6
 2820 0c2a 9709      		sbc r25,r7
 2821 0c2c 4816      		cp r4,r24
 2822 0c2e 5906      		cpc r5,r25
 2823 0c30 00F4      		brsh .L151
 659:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_time_compact_nanos (&_tdma_next_wakeup);
 2825               	.LM371:
 2826 0c32 8090 0000 		lds r8,_tdma_slot_time
 2827 0c36 9090 0000 		lds r9,_tdma_slot_time+1
 2828 0c3a A090 0000 		lds r10,_tdma_slot_time+2
 2829 0c3e B090 0000 		lds r11,_tdma_slot_time+3
 2830 0c42 C090 0000 		lds r12,_tdma_slot_time+4
 2831 0c46 D090 0000 		lds r13,_tdma_slot_time+5
 2832 0c4a E090 0000 		lds r14,_tdma_slot_time+6
 2833 0c4e F090 0000 		lds r15,_tdma_slot_time+7
 2834 0c52 0091 0000 		lds r16,_tdma_next_wakeup
 2835 0c56 1091 0000 		lds r17,_tdma_next_wakeup+1
 2836 0c5a 2091 0000 		lds r18,_tdma_next_wakeup+2
 2837 0c5e 3091 0000 		lds r19,_tdma_next_wakeup+3
 2838 0c62 4091 0000 		lds r20,_tdma_next_wakeup+4
 2839 0c66 5091 0000 		lds r21,_tdma_next_wakeup+5
 2840 0c6a 6091 0000 		lds r22,_tdma_next_wakeup+6
 2841 0c6e 7091 0000 		lds r23,_tdma_next_wakeup+7
 2842 0c72 80E0      		ldi r24,lo8(_tdma_next_wakeup)
 2843 0c74 90E0      		ldi r25,hi8(_tdma_next_wakeup)
 2844 0c76 0E94 0000 		call nrk_time_add
 658:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****         nrk_time_add (&_tdma_next_wakeup, _tdma_next_wakeup, _tdma_slot_time);
 2846               	.LM372:
 2847 0c7a 2FEF      		ldi r18,-1
 2848 0c7c 421A      		sub r4,r18
 2849 0c7e 520A      		sbc r5,r18
 2850 0c80 00C0      		rjmp .L135
 2851               	.L151:
 660:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       nrk_wait_until (_tdma_next_wakeup);
 2853               	.LM373:
 2854 0c82 80E0      		ldi r24,lo8(_tdma_next_wakeup)
 2855 0c84 90E0      		ldi r25,hi8(_tdma_next_wakeup)
 2856 0c86 0E94 0000 		call nrk_time_compact_nanos
 661:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****       slot = 0;
 2858               	.LM374:
 2859 0c8a 2091 0000 		lds r18,_tdma_next_wakeup
 2860 0c8e 3091 0000 		lds r19,_tdma_next_wakeup+1
 2861 0c92 4091 0000 		lds r20,_tdma_next_wakeup+2
 2862 0c96 5091 0000 		lds r21,_tdma_next_wakeup+3
 2863 0c9a 6091 0000 		lds r22,_tdma_next_wakeup+4
 2864 0c9e 7091 0000 		lds r23,_tdma_next_wakeup+5
 2865 0ca2 8091 0000 		lds r24,_tdma_next_wakeup+6
 2866 0ca6 9091 0000 		lds r25,_tdma_next_wakeup+7
 2867 0caa 0E94 0000 		call nrk_wait_until
 2868               	.L137:
 663:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		
 2870               	.LM375:
 2871 0cae 8091 0000 		lds r24,tdma_is_enabled
 2872 0cb2 8111      		cpse r24,__zero_reg__
 2873 0cb4 00C0      		rjmp .L148
 663:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 		
 2875               	.LM376:
 2876 0cb6 0E94 0000 		call nrk_wait_until_next_period
 2877 0cba 00C0      		rjmp .L137
 2878               	.L148:
 665:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****     }
 2880               	.LM377:
 2881 0cbc 612C      		mov r6,__zero_reg__
 2882 0cbe 712C      		mov r7,__zero_reg__
 2883 0cc0 00C0      		rjmp .L108
 2884               	.L121:
 585:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****             tdma_slots_per_cycle =
 2886               	.LM378:
 2887 0cc2 8285      		ldd r24,Z+10
 2888 0cc4 8295      		swap r24
 2889 0cc6 8F70      		andi r24,lo8(15)
 2890 0cc8 8093 0000 		sts tdma_ttl,r24
 588:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****               pPayload[TDMA_CYCLE_SIZE_LOW];
 2892               	.LM379:
 2893 0ccc 8185      		ldd r24,Z+9
 2894 0cce 90E0      		ldi r25,0
 2895 0cd0 982F      		mov r25,r24
 2896 0cd2 8827      		clr r24
 2897 0cd4 2085      		ldd r18,Z+8
 2898 0cd6 822B      		or r24,r18
 586:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****               (tdma_rfRxInfo.
 2900               	.LM380:
 2901 0cd8 9093 0000 		sts tdma_slots_per_cycle+1,r25
 2902 0cdc 8093 0000 		sts tdma_slots_per_cycle,r24
 590:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****             _tdma_slot_time.nano_secs = tdma_slot_len_ms * NANOS_PER_MS;
 2904               	.LM381:
 2905 0ce0 A385      		ldd r26,Z+11
 2906 0ce2 8A2F      		mov r24,r26
 2907 0ce4 90E0      		ldi r25,0
 2908 0ce6 9093 0000 		sts tdma_slot_len_ms+1,r25
 2909 0cea 8093 0000 		sts tdma_slot_len_ms,r24
 591:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****             _tdma_slot_time.secs = 0;
 2911               	.LM382:
 2912 0cee DC01      		movw r26,r24
 2913 0cf0 20E4      		ldi r18,lo8(64)
 2914 0cf2 32E4      		ldi r19,lo8(66)
 2915 0cf4 4FE0      		ldi r20,lo8(15)
 2916 0cf6 50E0      		ldi r21,0
 2917 0cf8 0E94 0000 		call __muluhisi3
 2918 0cfc 6093 0000 		sts _tdma_slot_time+4,r22
 2919 0d00 7093 0000 		sts _tdma_slot_time+4+1,r23
 2920 0d04 8093 0000 		sts _tdma_slot_time+4+2,r24
 2921 0d08 9093 0000 		sts _tdma_slot_time+4+3,r25
 592:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 	    }
 2923               	.LM383:
 2924 0d0c 1092 0000 		sts _tdma_slot_time,__zero_reg__
 2925 0d10 1092 0000 		sts _tdma_slot_time+1,__zero_reg__
 2926 0d14 1092 0000 		sts _tdma_slot_time+2,__zero_reg__
 2927 0d18 1092 0000 		sts _tdma_slot_time+3,__zero_reg__
 2928 0d1c 00C0      		rjmp .L118
 2936               	.Lscope30:
 2938               		.stabd	78,0,0
 2940               	.global	tdma_task_config
 2942               	tdma_task_config:
 2943               		.stabd	46,0,0
 832:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 833:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** 
 834:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** void tdma_task_config ()
 835:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c **** {
 2945               	.LM384:
 2946               	.LFBB31:
 2947               	/* prologue: function */
 2948               	/* frame size = 0 */
 2949               	/* stack size = 0 */
 2950               	.L__stack_usage = 0
 836:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   nrk_task_set_entry_function (&tdma_task, tdma_nw_task);
 2952               	.LM385:
 2953 0d1e 60E0      		ldi r22,lo8(gs(tdma_nw_task))
 2954 0d20 70E0      		ldi r23,hi8(gs(tdma_nw_task))
 2955 0d22 80E0      		ldi r24,lo8(tdma_task)
 2956 0d24 90E0      		ldi r25,hi8(tdma_task)
 2957 0d26 0E94 0000 		call nrk_task_set_entry_function
 837:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   nrk_task_set_stk (&tdma_task, tdma_task_stack, TDMA_STACKSIZE);
 2959               	.LM386:
 2960 0d2a 40E0      		ldi r20,0
 2961 0d2c 51E0      		ldi r21,lo8(1)
 2962 0d2e 60E0      		ldi r22,lo8(tdma_task_stack)
 2963 0d30 70E0      		ldi r23,hi8(tdma_task_stack)
 2964 0d32 80E0      		ldi r24,lo8(tdma_task)
 2965 0d34 90E0      		ldi r25,hi8(tdma_task)
 2966 0d36 0E94 0000 		call nrk_task_set_stk
 838:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_task.prio = TDMA_TASK_PRIORITY;
 2968               	.LM387:
 2969 0d3a E0E0      		ldi r30,lo8(tdma_task)
 2970 0d3c F0E0      		ldi r31,hi8(tdma_task)
 2971 0d3e 84E1      		ldi r24,lo8(20)
 2972 0d40 8087      		std Z+8,r24
 839:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_task.FirstActivation = TRUE;
 2974               	.LM388:
 2975 0d42 81E0      		ldi r24,lo8(1)
 2976 0d44 8783      		std Z+7,r24
 840:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_task.Type = BASIC_TASK;
 2978               	.LM389:
 2979 0d46 8187      		std Z+9,r24
 841:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_task.SchType = PREEMPTIVE;
 2981               	.LM390:
 2982 0d48 8287      		std Z+10,r24
 842:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_task.period.secs = 1;
 2984               	.LM391:
 2985 0d4a 81E0      		ldi r24,lo8(1)
 2986 0d4c 90E0      		ldi r25,0
 2987 0d4e A0E0      		ldi r26,0
 2988 0d50 B0E0      		ldi r27,0
 2989 0d52 8387      		std Z+11,r24
 2990 0d54 9487      		std Z+12,r25
 2991 0d56 A587      		std Z+13,r26
 2992 0d58 B687      		std Z+14,r27
 843:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_task.period.nano_secs = 0; // 20 * NANOS_PER_MS;
 2994               	.LM392:
 2995 0d5a 1786      		std Z+15,__zero_reg__
 2996 0d5c 108A      		std Z+16,__zero_reg__
 2997 0d5e 118A      		std Z+17,__zero_reg__
 2998 0d60 128A      		std Z+18,__zero_reg__
 844:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_task.cpu_reserve.secs = PCF_TDMA_TIMEOUT;       // bmac reserve , 0 to disable
 3000               	.LM393:
 3001 0d62 87E0      		ldi r24,lo8(7)
 3002 0d64 90E0      		ldi r25,0
 3003 0d66 A0E0      		ldi r26,0
 3004 0d68 B0E0      		ldi r27,0
 3005 0d6a 838B      		std Z+19,r24
 3006 0d6c 948B      		std Z+20,r25
 3007 0d6e A58B      		std Z+21,r26
 3008 0d70 B68B      		std Z+22,r27
 845:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_task.cpu_reserve.nano_secs = 0;
 3010               	.LM394:
 3011 0d72 178A      		std Z+23,__zero_reg__
 3012 0d74 108E      		std Z+24,__zero_reg__
 3013 0d76 118E      		std Z+25,__zero_reg__
 3014 0d78 128E      		std Z+26,__zero_reg__
 846:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_task.offset.secs = 0;
 3016               	.LM395:
 3017 0d7a 138E      		std Z+27,__zero_reg__
 3018 0d7c 148E      		std Z+28,__zero_reg__
 3019 0d7e 158E      		std Z+29,__zero_reg__
 3020 0d80 168E      		std Z+30,__zero_reg__
 847:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   tdma_task.offset.nano_secs = 0;
 3022               	.LM396:
 3023 0d82 178E      		std Z+31,__zero_reg__
 3024 0d84 10A2      		std Z+32,__zero_reg__
 3025 0d86 11A2      		std Z+33,__zero_reg__
 3026 0d88 12A2      		std Z+34,__zero_reg__
 848:../../src/net/pcf_tdma/rf231_soc/pcf_tdma.c ****   nrk_activate_task (&tdma_task);
 3028               	.LM397:
 3029 0d8a CF01      		movw r24,r30
 3030 0d8c 0C94 0000 		jmp nrk_activate_task
 3032               	.Lscope31:
 3034               		.stabd	78,0,0
 3035               		.local	cnt.3801
 3036               		.comm	cnt.3801,1,1
 3037               		.section	.progmem.data,"a",@progbits
 3040               	__c.3773:
 3041 0000 4661 696C 		.string	"Failed to register signal\r\n"
 3041      6564 2074 
 3041      6F20 7265 
 3041      6769 7374 
 3041      6572 2073 
 3044               	__c.3743:
 3045 001c 5444 4D41 		.string	"TDMA ERROR: creating enable signal failed\r\n"
 3045      2045 5252 
 3045      4F52 3A20 
 3045      6372 6561 
 3045      7469 6E67 
 3048               	__c.3741:
 3049 0048 5444 4D41 		.string	"TDMA ERROR: creating tx signal failed\r\n"
 3049      2045 5252 
 3049      4F52 3A20 
 3049      6372 6561 
 3049      7469 6E67 
 3052               	__c.3739:
 3053 0070 5444 4D41 		.string	"TDMA ERROR: creating rx signal failed\r\n"
 3053      2045 5252 
 3053      4F52 3A20 
 3053      6372 6561 
 3053      7469 6E67 
 3056               	__c.3714:
 3057 0098 5444 4D41 		.string	"TDMA TX: Woke up on wrong signal\r\n"
 3057      2054 583A 
 3057      2057 6F6B 
 3057      6520 7570 
 3057      206F 6E20 
 3060               	__c.3712:
 3061 00bb 5444 4D41 		.string	"TDMA TX: Error calling event wait\r\n"
 3061      2054 583A 
 3061      2045 7272 
 3061      6F72 2063 
 3061      616C 6C69 
 3062               		.local	tdma_error_callback
 3063               		.comm	tdma_error_callback,2,1
 3064               		.local	sync_status
 3065               		.comm	sync_status,1,1
 3066               		.local	tdma_rx_failure_cnt
 3067               		.comm	tdma_rx_failure_cnt,2,1
 3068               		.local	tx_reserve
 3069               		.comm	tx_reserve,1,1
 3070               		.local	_tdma_next_wakeup
 3071               		.comm	_tdma_next_wakeup,8,1
 3072               		.local	_tdma_slot_time
 3073               		.comm	_tdma_slot_time,8,1
 3074               		.local	_ttl_delay_per_tx
 3075               		.comm	_ttl_delay_per_tx,8,1
 3076               		.local	_ttl_delay_total
 3077               		.comm	_ttl_delay_total,8,1
 3078               		.local	ttl_delay
 3079               		.comm	ttl_delay,1,1
 3080               		.local	tdma_is_enabled
 3081               		.comm	tdma_is_enabled,1,1
 3082               		.local	tdma_chan
 3083               		.comm	tdma_chan,1,1
 3084               		.local	tdma_running
 3085               		.comm	tdma_running,1,1
 3086               		.local	tdma_rx_buf_empty
 3087               		.comm	tdma_rx_buf_empty,1,1
 3088               		.local	tdma_last_tx_slot
 3089               		.comm	tdma_last_tx_slot,2,1
 3090               		.local	tdma_slots_per_cycle
 3091               		.comm	tdma_slots_per_cycle,2,1
 3092               		.local	tdma_slot_len_ms
 3093               		.comm	tdma_slot_len_ms,2,1
 3094               		.local	tx_data_ready
 3095               		.comm	tx_data_ready,1,1
 3096               		.local	tdma_ttl
 3097               		.comm	tdma_ttl,1,1
 3098               		.local	tdma_mode
 3099               		.comm	tdma_mode,1,1
 3100               		.local	tdma_my_mac
 3101               		.comm	tdma_my_mac,1,1
 3102               		.local	_tdma_aes_enabled
 3103               		.comm	_tdma_aes_enabled,1,1
 3104               		.local	tdma_tx_slots
 3105               		.comm	tdma_tx_slots,1,1
 3106               		.local	tdma_tx_sched
 3107               		.comm	tdma_tx_sched,8,1
 3108               		.local	tdma_rx_buf
 3109               		.comm	tdma_rx_buf,112,1
 3110               		.local	tdma_tx_buf
 3111               		.comm	tdma_tx_buf,112,1
 3112               		.local	tdma_task_stack
 3113               		.comm	tdma_task_stack,256,1
 3114               		.local	tdma_task
 3115               		.comm	tdma_task,35,1
 3116               		.local	tdma_wakeup_flag
 3117               		.comm	tdma_wakeup_flag,1,1
 3118               		.comm	tdma_rfTxInfo,7,1
 3119               		.comm	tdma_rfRxInfo,12,1
 3120               		.comm	tdma_enable_signal,1,1
 3121               		.comm	tdma_tx_pkt_done_signal,1,1
 3122               		.comm	tdma_rx_pkt_signal,1,1
 3123               		.comm	error_num,1,1
 3124               		.comm	error_task,1,1
 3125               		.comm	app_timer0_prescale,1,1
 3126               		.comm	app_timer0_callback,2,1
 3127               		.comm	_nrk_time_trigger,1,1
 3128               		.comm	_nrk_prev_timer_val,1,1
 3129               		.comm	nrk_kernel_stk_ptr,2,1
 3130               		.comm	nrk_idle_task_stk,128,1
 3131               		.comm	_nrk_signal_list,4,1
 3174               		.text
 3176               	.Letext0:
 3177               		.ident	"GCC: (GNU) 4.9.1"
 3178               	.global __do_clear_bss
DEFINED SYMBOLS
                            *ABS*:0000000000000000 pcf_tdma.c
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:2      *ABS*:000000000000003e __SP_H__
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3      *ABS*:000000000000003d __SP_L__
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:4      *ABS*:000000000000003f __SREG__
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:5      *ABS*:000000000000003b __RAMPZ__
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:6      *ABS*:0000000000000000 __tmp_reg__
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:7      *ABS*:0000000000000001 __zero_reg__
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:344    .text:0000000000000000 rf_rx_callback
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:364    .text:0000000000000002 tdma_aes_setkey
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:383    .text:0000000000000006 tdma_aes_enable
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3101   .bss:0000000000000036 _tdma_aes_enabled
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:404    .text:000000000000000e tdma_aes_disable
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:425    .text:0000000000000016 tdma_sync_ok
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3063   .bss:0000000000000003 sync_status
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:446    .text:000000000000001c tdma_set_error_callback
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3036   .bss:0000000000000001 tdma_error_callback
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:482    .text:0000000000000030 tdma_tx_slot_add
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3105   .bss:0000000000000038 tdma_tx_sched
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3103   .bss:0000000000000037 tdma_tx_slots
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:511    .text:0000000000000040 tdma_tx_reserve_set
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:531    .text:0000000000000044 tdma_tx_reserve_get
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:553    .text:000000000000004a tdma_set_rf_power
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:588    .text:000000000000005a tdma_set_channel
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3081   .bss:0000000000000029 tdma_chan
                            *COM*:000000000000000c tdma_rfRxInfo
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:633    .text:000000000000007c tdma_set_slot_len_ms
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3091   .bss:0000000000000030 tdma_slot_len_ms
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3071   .bss:000000000000000f _tdma_slot_time
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:678    .text:00000000000000aa tdma_set_slots_per_cycle
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3089   .bss:000000000000002e tdma_slots_per_cycle
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:705    .text:00000000000000b4 tdma_send
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3093   .bss:0000000000000032 tx_data_ready
                            *COM*:0000000000000001 tdma_tx_pkt_done_signal
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3109   .bss:00000000000000b0 tdma_tx_buf
                            *COM*:0000000000000007 tdma_rfTxInfo
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3099   .bss:0000000000000035 tdma_my_mac
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3095   .bss:0000000000000033 tdma_ttl
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3060   .progmem.data:00000000000000bb __c.3712
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3056   .progmem.data:0000000000000098 __c.3714
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:946    .text:0000000000000202 tdma_recv
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3085   .bss:000000000000002b tdma_rx_buf_empty
                            *COM*:0000000000000001 tdma_rx_pkt_signal
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1222   .text:0000000000000382 tdma_rx_pkt_set_buffer
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1264   .text:000000000000039e tdma_ttl_set
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1286   .text:00000000000003a4 tdma_init
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3067   .bss:0000000000000006 tx_reserve
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3065   .bss:0000000000000004 tdma_rx_failure_cnt
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3097   .bss:0000000000000034 tdma_mode
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3052   .progmem.data:0000000000000070 __c.3739
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3048   .progmem.data:0000000000000048 __c.3741
                            *COM*:0000000000000001 tdma_enable_signal
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3044   .progmem.data:000000000000001c __c.3743
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3107   .bss:0000000000000040 tdma_rx_buf
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3083   .bss:000000000000002a tdma_running
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3079   .bss:0000000000000028 tdma_is_enabled
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1468   .text:00000000000004a8 tdma_get_rx_pkt_signal
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1492   .text:00000000000004b6 tdma_get_tx_done_signal
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1518   .text:00000000000004c4 tdma_rx_pkt_get
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1570   .text:00000000000004f4 tdma_rx_pkt_release
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1593   .text:00000000000004fc tdma_disable
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1615   .text:0000000000000504 tdma_enable
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1642   .text:0000000000000516 tdma_wakeup
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3115   .bss:0000000000000243 tdma_wakeup_flag
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1663   .text:000000000000051e tdma_started
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1685   .text:0000000000000524 _tdma_rx_master
                             .bss:0000000000000000 cnt.3801
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1826   .text:00000000000005c4 _tdma_rx
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:1955   .text:000000000000065a _tdma_tx
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:2127   .text:0000000000000758 tdma_nw_task
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3040   .progmem.data:0000000000000000 __c.3773
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3069   .bss:0000000000000007 _tdma_next_wakeup
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3087   .bss:000000000000002c tdma_last_tx_slot
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3077   .bss:0000000000000027 ttl_delay
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3075   .bss:000000000000001f _ttl_delay_total
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3073   .bss:0000000000000017 _ttl_delay_per_tx
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:2942   .text:0000000000000d1e tdma_task_config
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3113   .bss:0000000000000220 tdma_task
/var/folders/5w/cgn1dq610yqf6q25zlv0gqm40000gn/T//ccNE2bfs.s:3111   .bss:0000000000000120 tdma_task_stack
                            *COM*:0000000000000001 error_num
                            *COM*:0000000000000001 error_task
                            *COM*:0000000000000001 app_timer0_prescale
                            *COM*:0000000000000002 app_timer0_callback
                            *COM*:0000000000000001 _nrk_time_trigger
                            *COM*:0000000000000001 _nrk_prev_timer_val
                            *COM*:0000000000000002 nrk_kernel_stk_ptr
                            *COM*:0000000000000080 nrk_idle_task_stk
                            *COM*:0000000000000004 _nrk_signal_list

UNDEFINED SYMBOLS
aes_setkey
rf_tx_power
rf_init
__muluhisi3
nrk_signal_register
nrk_event_wait
nrk_kprintf
nrk_signal_create
nrk_cur_task_TCB
nrk_kernel_error_add
rf_set_cca_thresh
rf_power_down
rf_power_up
nrk_event_signal
rf_rx_off
rf_rx_on
rf_rx_packet_nonblock
aes_decrypt
nrk_spin_wait_us
aes_encrypt
rf_tx_packet
nrk_wait_until_next_period
nrk_time_get
__udivmodhi4
nrk_led_toggle
nrk_wait_until_ticks
nrk_led_clr
nrk_time_add
nrk_time_compact_nanos
nrk_wait_until
__usmulhisi3
nrk_time_sub
nrk_task_set_entry_function
nrk_task_set_stk
nrk_activate_task
__do_clear_bss
